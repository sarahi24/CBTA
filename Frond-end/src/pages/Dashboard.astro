---
// src/pages/Dashboard.astro
import Layout from '../layouts/Layout.astro';
import CardInfo from '../components/CardInfo.astro';
import ChartLine from '../components/ChartLine.astro';
import ChartDonut from '../components/ChartDonut.astro'; 
import ConceptsTable from '../components/ConceptsTable.astro';

const pageTitle = "Dashboard - SIGE";
---

<Layout title={pageTitle}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

    <header class="flex items-center gap-4 mb-6 md:mb-8 border-b pb-4 mt-6"> 
      <svg xmlns="http://www.w3.org/2000/svg" class="text-gray-700" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M4 4h8v4h-8zM4 12h8v8h-8zM16 4h4v8h-4zM16 16h4v4h-4z"></path>
      </svg>
      <h1 class="text-2xl md:text-3xl font-bold text-gray-800">Resumen General</h1>
    </header>

    {/* TARJETAS */}
    <section class="flex flex-row space-x-4 mb-8 overflow-x-auto pb-4">
      <CardInfo title="Total Estudiantes" icon="students" href="/estudiante_lista" />
      <CardInfo title="Pagos Pendientes" icon="pending" href="/concepts" />
      <CardInfo title="Total Recaudado" icon="recaudado" href="/payments" />
      <CardInfo title="Gestión de Personal" icon="students" href="/roles" />
    </section>

    {/* GRÁFICOS */}
    <section class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
      <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100 lg:col-span-2">
        <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-3">Evolución de Pagos</h2>
        <ChartLine />
      </div>
      
      <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100 lg:col-span-1">
        <h2 class="text-xl font-bold text-gray-800 mb-4 text-center border-b pb-3">Estado de Cobros</h2>
        <ChartDonut /> 
      </div>
    </section>

    {/* TABLA DE CONCEPTOS (Ahora se llena sola) */}
    <section class="bg-white p-6 rounded-xl shadow-lg border border-gray-100 mb-8"> 
      <h2 class="text-xl font-bold text-gray-800 mb-6 border-b pb-3">Conceptos Registrados</h2>
      <ConceptsTable />
    </section>

  </div>
</Layout>