import { e as createComponent, r as renderTemplate, k as renderComponent, m as maybeRenderHead, h as addAttribute } from '../chunks/astro/server_6O5fLeT-.mjs';
import 'piccolore';
import { $ as $$Layout } from '../chunks/Layout_CIeDwhMC.mjs';
/* empty css                                    */
export { renderers } from '../renderers.mjs';

var __freeze = Object.freeze;
var __defProp = Object.defineProperty;
var __template = (cooked, raw) => __freeze(__defProp(cooked, "raw", { value: __freeze(raw || cooked.slice()) }));
var _a, _b;
const $$Students = createComponent(($$result, $$props, $$slots) => {
  const MAX_SEMESTER = 10;
  const SEMESTERS = Array.from({ length: MAX_SEMESTER }, (_, i) => i + 1);
  const CAREERS = [
    { code: "TAG-E", name: "T\xE9cnico Agropecuario" },
    { code: "TOF", name: "T\xE9cnico en Ofim\xE1tica" },
    { code: "TEM", name: "T\xE9cnico en Adm\xF3n. de Emprendimiento" },
    { code: "TAG-M", name: "T\xE9cnico Agropecuario (modalidad mixta)" },
    { code: "TRH", name: "T\xE9cnico en Adm\xF3n. de Recursos Humanos (modalidad mixta)" }
  ];
  const CAREER_MAP = CAREERS.reduce((a, c) => {
    a[c.code] = c.name;
    return a;
  }, { "": "Sin Carrera" });
  let students = [];
  students = students.map((s, i) => ({
    id: s.id ?? String(i + 1),
    numControl: s.numControl ?? "",
    nombre: s.nombre ?? "",
    apellidoP: s.apellidoP ?? "",
    apellidoM: s.apellidoM ?? "",
    semestre: s.semestre ? Math.min(Number(s.semestre), MAX_SEMESTER) : 1,
    carrera: s.carrera ?? "",
    correo: s.correo ?? ""
  }));
  const studentsJSON = JSON.stringify(students);
  const careerMapJSON = JSON.stringify(CAREER_MAP);
  return renderTemplate(_b || (_b = __template(['<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js" crossorigin="anonymous" referrerpolicy="no-referrer" defer><\/script>', ""])), renderComponent($$result, "Layout", $$Layout, { "title": "Administraci\xF3n de Alumnos", "data-astro-cid-65fecvdy": true }, { "default": ($$result2) => renderTemplate(_a || (_a = __template(["", '<div class="max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-10 min-h-screen" data-astro-cid-65fecvdy><header class="flex flex-wrap items-center justify-between mb-8 gap-4 border-b pb-6 border-gray-200" data-astro-cid-65fecvdy><div class="flex items-center gap-4" data-astro-cid-65fecvdy><div class="p-2 sm:p-3 bg-emerald-100 rounded-2xl text-emerald-800 shrink-0" data-astro-cid-65fecvdy><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-65fecvdy><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" data-astro-cid-65fecvdy></path><circle cx="9" cy="7" r="4" data-astro-cid-65fecvdy></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87" data-astro-cid-65fecvdy></path><path d="M16 3.13a4 4 0 0 1 0 7.75" data-astro-cid-65fecvdy></path></svg></div><div data-astro-cid-65fecvdy><h1 class="text-xl sm:text-3xl font-black text-gray-900 tracking-tight leading-tight" data-astro-cid-65fecvdy>Administraci\xF3n de Alumnos</h1><p class="text-gray-500 text-xs sm:text-sm italic" data-astro-cid-65fecvdy>Control acad\xE9mico y financiero</p></div></div><button id="export-xlsx" class="flex items-center gap-2 px-5 py-2.5 rounded-xl bg-emerald-700 text-white font-bold shadow-lg hover:bg-emerald-800 transition transform active:scale-95 text-xs sm:text-sm" data-astro-cid-65fecvdy><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-65fecvdy><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" data-astro-cid-65fecvdy></path><polyline points="7 10 12 15 17 10" data-astro-cid-65fecvdy></polyline><line x1="12" y1="15" x2="12" y2="3" data-astro-cid-65fecvdy></line></svg>\nEXPORTAR REPORTE\n</button></header><div class="relative flex items-center gap-2 mb-6" data-astro-cid-65fecvdy><button id="filter-btn" class="flex items-center justify-center p-2.5 sm:px-4 sm:py-2.5 rounded-xl border-2 border-emerald-400 bg-emerald-50 text-emerald-700 font-bold hover:bg-emerald-100 transition shadow-sm shrink-0" data-astro-cid-65fecvdy><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-65fecvdy><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3" data-astro-cid-65fecvdy></polygon></svg><span class="hidden sm:inline ml-2 text-sm" data-astro-cid-65fecvdy>Filtros</span></button><div class="relative flex-1 min-w-0" data-astro-cid-65fecvdy><span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400" data-astro-cid-65fecvdy><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-65fecvdy><circle cx="11" cy="11" r="8" data-astro-cid-65fecvdy></circle><line x1="21" y1="21" x2="16.65" y2="16.65" data-astro-cid-65fecvdy></line></svg></span><input id="search" placeholder="Buscar por nombre o matr\xEDcula..." class="w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-300 focus:ring-2 focus:ring-emerald-500 outline-none transition bg-white text-sm" data-astro-cid-65fecvdy></div><div id="filter-menu" class="absolute top-full left-0 z-50 w-full sm:w-80 mt-2 bg-white rounded-2xl shadow-2xl border border-gray-100 p-6" data-astro-cid-65fecvdy><h3 class="text-gray-800 font-black mb-4 border-b pb-2" data-astro-cid-65fecvdy>Opciones de Filtrado</h3><div class="space-y-4" data-astro-cid-65fecvdy><div data-astro-cid-65fecvdy><label class="block text-xs font-bold text-gray-400 uppercase mb-1" data-astro-cid-65fecvdy>Programa Educativo:</label><select id="filter-carrera" class="w-full px-3 py-2 rounded-lg border border-gray-200 text-sm outline-none focus:border-emerald-500 bg-gray-50" data-astro-cid-65fecvdy><option value="" data-astro-cid-65fecvdy>Todos los Programas</option>', '</select></div><div data-astro-cid-65fecvdy><label class="block text-xs font-bold text-gray-400 uppercase mb-1" data-astro-cid-65fecvdy>Nivel Semestral:</label><select id="filter-semestre" class="w-full px-3 py-2 rounded-lg border border-gray-200 text-sm outline-none focus:border-emerald-500 bg-gray-50" data-astro-cid-65fecvdy><option value="" data-astro-cid-65fecvdy>Todos los Semestres</option>', '</select></div><div data-astro-cid-65fecvdy><label class="block text-xs font-bold text-gray-400 uppercase mb-1" data-astro-cid-65fecvdy>Estado de Pago:</label><select id="filter-adeudo" class="w-full px-3 py-2 rounded-lg border border-gray-200 text-sm outline-none focus:border-emerald-500 bg-gray-50" data-astro-cid-65fecvdy><option value="" data-astro-cid-65fecvdy>Cualquier estado</option><option value="pendiente" data-astro-cid-65fecvdy>Con Adeudo</option><option value="corriente" data-astro-cid-65fecvdy>Al Corriente</option></select></div><button id="clear-filters" class="w-full mt-2 py-2.5 rounded-xl bg-red-50 text-red-600 font-bold border border-red-100 hover:bg-red-200 transition flex items-center justify-center gap-2 text-xs" data-astro-cid-65fecvdy>\nLimpiar Filtros\n</button></div></div></div><section class="bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden" data-astro-cid-65fecvdy><div class="overflow-x-auto" data-astro-cid-65fecvdy><table class="min-w-full text-sm" data-astro-cid-65fecvdy><thead class="bg-[#2D584C] text-white text-left" data-astro-cid-65fecvdy><tr data-astro-cid-65fecvdy><th class="px-6 py-4 font-bold uppercase tracking-wider" data-astro-cid-65fecvdy>N. Control</th><th class="px-6 py-4 font-bold uppercase tracking-wider" data-astro-cid-65fecvdy>Nombre Completo</th><th class="px-6 py-4 font-bold uppercase tracking-wider text-center" data-astro-cid-65fecvdy>Sem.</th><th class="px-6 py-4 font-bold uppercase tracking-wider" data-astro-cid-65fecvdy>Carrera</th><th class="px-6 py-4 font-bold uppercase tracking-wider text-center" data-astro-cid-65fecvdy>Estado</th><th class="px-6 py-4 font-bold uppercase tracking-wider text-right" data-astro-cid-65fecvdy>Adeudo</th></tr></thead><tbody id="tbody-desktop" class="divide-y divide-gray-100 text-gray-700" data-astro-cid-65fecvdy></tbody></table></div><div class="px-6 py-4 bg-gray-50 border-t border-gray-100 flex flex-col sm:flex-row justify-between items-center gap-4" data-astro-cid-65fecvdy><span id="pagination-info" class="text-[11px] font-bold text-gray-400 uppercase tracking-widest italic" data-astro-cid-65fecvdy></span><div id="pagination-controls" class="flex items-center gap-1" data-astro-cid-65fecvdy></div></div><div id="no-results" class="hidden text-center text-gray-400 py-20 text-lg italic" data-astro-cid-65fecvdy>No hay alumnos que coincidan.</div></section></div><div id="data-store"', "", " data-astro-cid-65fecvdy></div><script type=\"module\">\nconst STORAGE_KEY = 'studentsList';\nconst ITEMS_PER_PAGE = 50;\nlet currentPage = 1;\n\nconst dataStore = document.getElementById('data-store');\nconst initial = JSON.parse(dataStore.dataset.students);\nconst CAREER_MAP = JSON.parse(dataStore.dataset.careerMap);\n\nlet filters = { text:'', carrera:'', semestre:'', adeudo:'' };\n\nconst filterBtn = document.getElementById('filter-btn');\nconst filterMenu = document.getElementById('filter-menu');\nconst searchInput = document.getElementById('search');\nconst filterCarrera = document.getElementById('filter-carrera');\nconst filterSemestre = document.getElementById('filter-semestre');\nconst filterAdeudo = document.getElementById('filter-adeudo');\nconst clearFiltersButton = document.getElementById('clear-filters');\nconst tbodyDesktop = document.getElementById('tbody-desktop'); \nconst noResults = document.getElementById('no-results');\nconst paginationInfo = document.getElementById('pagination-info');\nconst paginationControls = document.getElementById('pagination-controls');\n\n// Interacci\xF3n Men\xFA Filtros\nfilterBtn.addEventListener('click', (e) => {\n  e.stopPropagation();\n  filterMenu.classList.toggle('active');\n});\n\ndocument.addEventListener('click', (e) => {\n    if (!filterBtn.contains(e.target) && !filterMenu.contains(e.target)) {\n        filterMenu.classList.remove('active');\n    }\n});\n\n// Funciones de Datos\nfunction readLocal(){\n  try { return JSON.parse(localStorage.getItem(STORAGE_KEY)) || initial; } catch { return initial; }\n}\n\nfunction getChargesSum(id){\n  try {\n    const c = JSON.parse(localStorage.getItem('chargesList') || '[]');\n    return c.filter(x => String(x.studentId) === String(id) && (x.status === 'pending' || x.status === 'pendiente'))\n            .reduce((s,x)=>s+Number(x.amount),0);\n  } catch { return 0; }\n}\n\nfunction paymentStatus(id){\n  const p = getChargesSum(id);\n  return p > 0 ? { text:'Pago Pendiente', adeudo:p.toFixed(2), bad:true } : { text:'Al Corriente', adeudo:'0.00', bad:false };\n}\n\n// L\xF3gica de Renderizado y Paginaci\xF3n\nfunction render(){\n    const allFiltered = readLocal().filter(s=>{\n      const t = filters.text.toLowerCase();\n      const st = paymentStatus(s.id);\n      const fullName = `${s.nombre} ${s.apellidoP} ${s.apellidoM}`.toLowerCase();\n      return ((!t || fullName.includes(t) || s.numControl.toLowerCase().includes(t)) &&\n        (!filters.carrera || s.carrera === filters.carrera) &&\n        (!filters.semestre || String(s.semestre) === filters.semestre) &&\n        (!filters.adeudo || (filters.adeudo==='pendiente' && st.bad) || (filters.adeudo==='corriente' && !st.bad)));\n    });\n\n    const totalItems = allFiltered.length;\n    const totalPages = Math.ceil(totalItems / ITEMS_PER_PAGE);\n    \n    if (currentPage > totalPages) currentPage = totalPages || 1;\n\n    const start = (currentPage - 1) * ITEMS_PER_PAGE;\n    const paginatedList = allFiltered.slice(start, start + ITEMS_PER_PAGE);\n\n    tbodyDesktop.innerHTML = '';\n    noResults.classList.toggle('hidden', allFiltered.length > 0);\n\n    paginatedList.forEach((s)=>{\n        const st = paymentStatus(s.id);\n        const badgeClass = st.bad ? 'badge-pending' : 'badge-current';\n        tbodyDesktop.insertAdjacentHTML('beforeend', `\n          <tr class=\"hover:bg-emerald-50 transition border-b border-gray-50\">\n            <td class=\"px-6 py-4 font-mono text-xs font-bold text-gray-500\">${s.numControl}</td>\n            <td class=\"px-6 py-4 font-bold text-gray-900\">${s.nombre} ${s.apellidoP} ${s.apellidoM}</td>\n            <td class=\"px-6 py-4 text-center font-medium\">${s.semestre}\xBA</td>\n            <td class=\"px-6 py-4 text-gray-600 text-xs\">${CAREER_MAP[s.carrera] || s.carrera}</td>\n            <td class=\"px-6 py-4 text-center\">\n              <span class=\"px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider ${badgeClass}\">${st.text}</span>\n            </td>\n            <td class=\"px-6 py-4 text-right font-black text-base ${st.bad ? 'text-red-600' : 'text-emerald-700'}\">$${st.adeudo}</td>\n          </tr>\n        `);\n    });\n\n    updatePaginationUI(totalItems, totalPages);\n}\n\nfunction updatePaginationUI(totalItems, totalPages) {\n    const startItem = totalItems === 0 ? 0 : (currentPage - 1) * ITEMS_PER_PAGE + 1;\n    const endItem = Math.min(currentPage * ITEMS_PER_PAGE, totalItems);\n    \n    paginationInfo.innerText = `Mostrando ${startItem}-${endItem} de ${totalItems} registros`;\n    paginationControls.innerHTML = '';\n\n    if (totalPages <= 1) return;\n\n    const createBtn = (label, targetPage, disabled = false, active = false) => {\n        const btn = document.createElement('button');\n        btn.innerText = label;\n        btn.disabled = disabled;\n        btn.className = `min-w-[32px] h-8 px-2 rounded-lg text-xs font-black transition-all ${\n            active ? 'bg-[#2D584C] text-white shadow-md' : \n            disabled ? 'text-gray-300 cursor-not-allowed' : 'text-gray-500 hover:bg-gray-200'\n        }`;\n        if (!disabled) btn.onclick = () => { currentPage = targetPage; render(); window.scrollTo({top:0, behavior:'smooth'}); };\n        return btn;\n    };\n\n    paginationControls.appendChild(createBtn('\u2190', currentPage - 1, currentPage === 1));\n\n    for (let i = 1; i <= totalPages; i++) {\n        if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) {\n            paginationControls.appendChild(createBtn(i, i, false, currentPage === i));\n        } else if (i === currentPage - 2 || i === currentPage + 2) {\n            const span = document.createElement('span');\n            span.innerText = '...';\n            span.className = 'text-gray-400 px-1';\n            paginationControls.appendChild(span);\n        }\n    }\n\n    paginationControls.appendChild(createBtn('\u2192', currentPage + 1, currentPage === totalPages));\n}\n\n// Eventos de Filtro\nsearchInput.addEventListener('input', (e) => { filters.text = e.target.value; currentPage = 1; render(); });\nfilterCarrera.addEventListener('change', (e) => { filters.carrera = e.target.value; currentPage = 1; render(); });\nfilterSemestre.addEventListener('change', (e) => { filters.semestre = e.target.value; currentPage = 1; render(); });\nfilterAdeudo.addEventListener('change', (e) => { filters.adeudo = e.target.value; currentPage = 1; render(); });\n\nclearFiltersButton.addEventListener('click', () => {\n    filters = { text:'', carrera:'', semestre:'', adeudo:'' };\n    searchInput.value = ''; filterCarrera.value = ''; filterSemestre.value = ''; filterAdeudo.value = '';\n    currentPage = 1;\n    render();\n    filterMenu.classList.remove('active');\n});\n\n// Exportaci\xF3n XLSX\ndocument.getElementById('export-xlsx').addEventListener('click', () => {\n    if (typeof XLSX === 'undefined') return alert('Cargando librer\xEDa...');\n    const allStudents = readLocal();\n    const wb = XLSX.utils.book_new();\n    const uniqueCareers = [...new Set(allStudents.map(s => s.carrera))];\n\n    uniqueCareers.forEach(careerCode => {\n        const studentsInCareer = allStudents\n            .filter(s => s.carrera === careerCode)\n            .sort((a, b) => a.semestre - b.semestre);\n\n        const data = studentsInCareer.map(s => {\n            const status = paymentStatus(s.id);\n            return {\n                'Semestre': s.semestre + '\xBA',\n                'N\xFAmero de Control': s.numControl, \n                'Nombre Completo': `${s.nombre} ${s.apellidoP} ${s.apellidoM}`,\n                'Carrera': CAREER_MAP[s.carrera] || s.carrera,\n                'Estado Financiero': status.text, \n                'Adeudo Pendiente': parseFloat(status.adeudo)\n            };\n        });\n\n        if (data.length > 0) {\n            const ws = XLSX.utils.json_to_sheet(data);\n            let sheetName = (CAREER_MAP[careerCode] || careerCode || 'General')\n                .replace(/[\\\\*?:/\\[\\]]/g, '').substring(0, 31);\n            XLSX.utils.book_append_sheet(wb, ws, sheetName);\n        }\n    });\n    XLSX.writeFile(wb, `Reporte_General_${new Date().toLocaleDateString().replace(/\\//g, '-')}.xlsx`);\n});\n\nwindow.onload = render;\n<\/script>"], ["", '<div class="max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-10 min-h-screen" data-astro-cid-65fecvdy><header class="flex flex-wrap items-center justify-between mb-8 gap-4 border-b pb-6 border-gray-200" data-astro-cid-65fecvdy><div class="flex items-center gap-4" data-astro-cid-65fecvdy><div class="p-2 sm:p-3 bg-emerald-100 rounded-2xl text-emerald-800 shrink-0" data-astro-cid-65fecvdy><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-65fecvdy><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" data-astro-cid-65fecvdy></path><circle cx="9" cy="7" r="4" data-astro-cid-65fecvdy></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87" data-astro-cid-65fecvdy></path><path d="M16 3.13a4 4 0 0 1 0 7.75" data-astro-cid-65fecvdy></path></svg></div><div data-astro-cid-65fecvdy><h1 class="text-xl sm:text-3xl font-black text-gray-900 tracking-tight leading-tight" data-astro-cid-65fecvdy>Administraci\xF3n de Alumnos</h1><p class="text-gray-500 text-xs sm:text-sm italic" data-astro-cid-65fecvdy>Control acad\xE9mico y financiero</p></div></div><button id="export-xlsx" class="flex items-center gap-2 px-5 py-2.5 rounded-xl bg-emerald-700 text-white font-bold shadow-lg hover:bg-emerald-800 transition transform active:scale-95 text-xs sm:text-sm" data-astro-cid-65fecvdy><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-65fecvdy><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" data-astro-cid-65fecvdy></path><polyline points="7 10 12 15 17 10" data-astro-cid-65fecvdy></polyline><line x1="12" y1="15" x2="12" y2="3" data-astro-cid-65fecvdy></line></svg>\nEXPORTAR REPORTE\n</button></header><div class="relative flex items-center gap-2 mb-6" data-astro-cid-65fecvdy><button id="filter-btn" class="flex items-center justify-center p-2.5 sm:px-4 sm:py-2.5 rounded-xl border-2 border-emerald-400 bg-emerald-50 text-emerald-700 font-bold hover:bg-emerald-100 transition shadow-sm shrink-0" data-astro-cid-65fecvdy><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-65fecvdy><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3" data-astro-cid-65fecvdy></polygon></svg><span class="hidden sm:inline ml-2 text-sm" data-astro-cid-65fecvdy>Filtros</span></button><div class="relative flex-1 min-w-0" data-astro-cid-65fecvdy><span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400" data-astro-cid-65fecvdy><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-65fecvdy><circle cx="11" cy="11" r="8" data-astro-cid-65fecvdy></circle><line x1="21" y1="21" x2="16.65" y2="16.65" data-astro-cid-65fecvdy></line></svg></span><input id="search" placeholder="Buscar por nombre o matr\xEDcula..." class="w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-300 focus:ring-2 focus:ring-emerald-500 outline-none transition bg-white text-sm" data-astro-cid-65fecvdy></div><div id="filter-menu" class="absolute top-full left-0 z-50 w-full sm:w-80 mt-2 bg-white rounded-2xl shadow-2xl border border-gray-100 p-6" data-astro-cid-65fecvdy><h3 class="text-gray-800 font-black mb-4 border-b pb-2" data-astro-cid-65fecvdy>Opciones de Filtrado</h3><div class="space-y-4" data-astro-cid-65fecvdy><div data-astro-cid-65fecvdy><label class="block text-xs font-bold text-gray-400 uppercase mb-1" data-astro-cid-65fecvdy>Programa Educativo:</label><select id="filter-carrera" class="w-full px-3 py-2 rounded-lg border border-gray-200 text-sm outline-none focus:border-emerald-500 bg-gray-50" data-astro-cid-65fecvdy><option value="" data-astro-cid-65fecvdy>Todos los Programas</option>', '</select></div><div data-astro-cid-65fecvdy><label class="block text-xs font-bold text-gray-400 uppercase mb-1" data-astro-cid-65fecvdy>Nivel Semestral:</label><select id="filter-semestre" class="w-full px-3 py-2 rounded-lg border border-gray-200 text-sm outline-none focus:border-emerald-500 bg-gray-50" data-astro-cid-65fecvdy><option value="" data-astro-cid-65fecvdy>Todos los Semestres</option>', '</select></div><div data-astro-cid-65fecvdy><label class="block text-xs font-bold text-gray-400 uppercase mb-1" data-astro-cid-65fecvdy>Estado de Pago:</label><select id="filter-adeudo" class="w-full px-3 py-2 rounded-lg border border-gray-200 text-sm outline-none focus:border-emerald-500 bg-gray-50" data-astro-cid-65fecvdy><option value="" data-astro-cid-65fecvdy>Cualquier estado</option><option value="pendiente" data-astro-cid-65fecvdy>Con Adeudo</option><option value="corriente" data-astro-cid-65fecvdy>Al Corriente</option></select></div><button id="clear-filters" class="w-full mt-2 py-2.5 rounded-xl bg-red-50 text-red-600 font-bold border border-red-100 hover:bg-red-200 transition flex items-center justify-center gap-2 text-xs" data-astro-cid-65fecvdy>\nLimpiar Filtros\n</button></div></div></div><section class="bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden" data-astro-cid-65fecvdy><div class="overflow-x-auto" data-astro-cid-65fecvdy><table class="min-w-full text-sm" data-astro-cid-65fecvdy><thead class="bg-[#2D584C] text-white text-left" data-astro-cid-65fecvdy><tr data-astro-cid-65fecvdy><th class="px-6 py-4 font-bold uppercase tracking-wider" data-astro-cid-65fecvdy>N. Control</th><th class="px-6 py-4 font-bold uppercase tracking-wider" data-astro-cid-65fecvdy>Nombre Completo</th><th class="px-6 py-4 font-bold uppercase tracking-wider text-center" data-astro-cid-65fecvdy>Sem.</th><th class="px-6 py-4 font-bold uppercase tracking-wider" data-astro-cid-65fecvdy>Carrera</th><th class="px-6 py-4 font-bold uppercase tracking-wider text-center" data-astro-cid-65fecvdy>Estado</th><th class="px-6 py-4 font-bold uppercase tracking-wider text-right" data-astro-cid-65fecvdy>Adeudo</th></tr></thead><tbody id="tbody-desktop" class="divide-y divide-gray-100 text-gray-700" data-astro-cid-65fecvdy></tbody></table></div><div class="px-6 py-4 bg-gray-50 border-t border-gray-100 flex flex-col sm:flex-row justify-between items-center gap-4" data-astro-cid-65fecvdy><span id="pagination-info" class="text-[11px] font-bold text-gray-400 uppercase tracking-widest italic" data-astro-cid-65fecvdy></span><div id="pagination-controls" class="flex items-center gap-1" data-astro-cid-65fecvdy></div></div><div id="no-results" class="hidden text-center text-gray-400 py-20 text-lg italic" data-astro-cid-65fecvdy>No hay alumnos que coincidan.</div></section></div><div id="data-store"', "", " data-astro-cid-65fecvdy></div><script type=\"module\">\nconst STORAGE_KEY = 'studentsList';\nconst ITEMS_PER_PAGE = 50;\nlet currentPage = 1;\n\nconst dataStore = document.getElementById('data-store');\nconst initial = JSON.parse(dataStore.dataset.students);\nconst CAREER_MAP = JSON.parse(dataStore.dataset.careerMap);\n\nlet filters = { text:'', carrera:'', semestre:'', adeudo:'' };\n\nconst filterBtn = document.getElementById('filter-btn');\nconst filterMenu = document.getElementById('filter-menu');\nconst searchInput = document.getElementById('search');\nconst filterCarrera = document.getElementById('filter-carrera');\nconst filterSemestre = document.getElementById('filter-semestre');\nconst filterAdeudo = document.getElementById('filter-adeudo');\nconst clearFiltersButton = document.getElementById('clear-filters');\nconst tbodyDesktop = document.getElementById('tbody-desktop'); \nconst noResults = document.getElementById('no-results');\nconst paginationInfo = document.getElementById('pagination-info');\nconst paginationControls = document.getElementById('pagination-controls');\n\n// Interacci\xF3n Men\xFA Filtros\nfilterBtn.addEventListener('click', (e) => {\n  e.stopPropagation();\n  filterMenu.classList.toggle('active');\n});\n\ndocument.addEventListener('click', (e) => {\n    if (!filterBtn.contains(e.target) && !filterMenu.contains(e.target)) {\n        filterMenu.classList.remove('active');\n    }\n});\n\n// Funciones de Datos\nfunction readLocal(){\n  try { return JSON.parse(localStorage.getItem(STORAGE_KEY)) || initial; } catch { return initial; }\n}\n\nfunction getChargesSum(id){\n  try {\n    const c = JSON.parse(localStorage.getItem('chargesList') || '[]');\n    return c.filter(x => String(x.studentId) === String(id) && (x.status === 'pending' || x.status === 'pendiente'))\n            .reduce((s,x)=>s+Number(x.amount),0);\n  } catch { return 0; }\n}\n\nfunction paymentStatus(id){\n  const p = getChargesSum(id);\n  return p > 0 ? { text:'Pago Pendiente', adeudo:p.toFixed(2), bad:true } : { text:'Al Corriente', adeudo:'0.00', bad:false };\n}\n\n// L\xF3gica de Renderizado y Paginaci\xF3n\nfunction render(){\n    const allFiltered = readLocal().filter(s=>{\n      const t = filters.text.toLowerCase();\n      const st = paymentStatus(s.id);\n      const fullName = \\`\\${s.nombre} \\${s.apellidoP} \\${s.apellidoM}\\`.toLowerCase();\n      return ((!t || fullName.includes(t) || s.numControl.toLowerCase().includes(t)) &&\n        (!filters.carrera || s.carrera === filters.carrera) &&\n        (!filters.semestre || String(s.semestre) === filters.semestre) &&\n        (!filters.adeudo || (filters.adeudo==='pendiente' && st.bad) || (filters.adeudo==='corriente' && !st.bad)));\n    });\n\n    const totalItems = allFiltered.length;\n    const totalPages = Math.ceil(totalItems / ITEMS_PER_PAGE);\n    \n    if (currentPage > totalPages) currentPage = totalPages || 1;\n\n    const start = (currentPage - 1) * ITEMS_PER_PAGE;\n    const paginatedList = allFiltered.slice(start, start + ITEMS_PER_PAGE);\n\n    tbodyDesktop.innerHTML = '';\n    noResults.classList.toggle('hidden', allFiltered.length > 0);\n\n    paginatedList.forEach((s)=>{\n        const st = paymentStatus(s.id);\n        const badgeClass = st.bad ? 'badge-pending' : 'badge-current';\n        tbodyDesktop.insertAdjacentHTML('beforeend', \\`\n          <tr class=\"hover:bg-emerald-50 transition border-b border-gray-50\">\n            <td class=\"px-6 py-4 font-mono text-xs font-bold text-gray-500\">\\${s.numControl}</td>\n            <td class=\"px-6 py-4 font-bold text-gray-900\">\\${s.nombre} \\${s.apellidoP} \\${s.apellidoM}</td>\n            <td class=\"px-6 py-4 text-center font-medium\">\\${s.semestre}\xBA</td>\n            <td class=\"px-6 py-4 text-gray-600 text-xs\">\\${CAREER_MAP[s.carrera] || s.carrera}</td>\n            <td class=\"px-6 py-4 text-center\">\n              <span class=\"px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider \\${badgeClass}\">\\${st.text}</span>\n            </td>\n            <td class=\"px-6 py-4 text-right font-black text-base \\${st.bad ? 'text-red-600' : 'text-emerald-700'}\">$\\${st.adeudo}</td>\n          </tr>\n        \\`);\n    });\n\n    updatePaginationUI(totalItems, totalPages);\n}\n\nfunction updatePaginationUI(totalItems, totalPages) {\n    const startItem = totalItems === 0 ? 0 : (currentPage - 1) * ITEMS_PER_PAGE + 1;\n    const endItem = Math.min(currentPage * ITEMS_PER_PAGE, totalItems);\n    \n    paginationInfo.innerText = \\`Mostrando \\${startItem}-\\${endItem} de \\${totalItems} registros\\`;\n    paginationControls.innerHTML = '';\n\n    if (totalPages <= 1) return;\n\n    const createBtn = (label, targetPage, disabled = false, active = false) => {\n        const btn = document.createElement('button');\n        btn.innerText = label;\n        btn.disabled = disabled;\n        btn.className = \\`min-w-[32px] h-8 px-2 rounded-lg text-xs font-black transition-all \\${\n            active ? 'bg-[#2D584C] text-white shadow-md' : \n            disabled ? 'text-gray-300 cursor-not-allowed' : 'text-gray-500 hover:bg-gray-200'\n        }\\`;\n        if (!disabled) btn.onclick = () => { currentPage = targetPage; render(); window.scrollTo({top:0, behavior:'smooth'}); };\n        return btn;\n    };\n\n    paginationControls.appendChild(createBtn('\u2190', currentPage - 1, currentPage === 1));\n\n    for (let i = 1; i <= totalPages; i++) {\n        if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) {\n            paginationControls.appendChild(createBtn(i, i, false, currentPage === i));\n        } else if (i === currentPage - 2 || i === currentPage + 2) {\n            const span = document.createElement('span');\n            span.innerText = '...';\n            span.className = 'text-gray-400 px-1';\n            paginationControls.appendChild(span);\n        }\n    }\n\n    paginationControls.appendChild(createBtn('\u2192', currentPage + 1, currentPage === totalPages));\n}\n\n// Eventos de Filtro\nsearchInput.addEventListener('input', (e) => { filters.text = e.target.value; currentPage = 1; render(); });\nfilterCarrera.addEventListener('change', (e) => { filters.carrera = e.target.value; currentPage = 1; render(); });\nfilterSemestre.addEventListener('change', (e) => { filters.semestre = e.target.value; currentPage = 1; render(); });\nfilterAdeudo.addEventListener('change', (e) => { filters.adeudo = e.target.value; currentPage = 1; render(); });\n\nclearFiltersButton.addEventListener('click', () => {\n    filters = { text:'', carrera:'', semestre:'', adeudo:'' };\n    searchInput.value = ''; filterCarrera.value = ''; filterSemestre.value = ''; filterAdeudo.value = '';\n    currentPage = 1;\n    render();\n    filterMenu.classList.remove('active');\n});\n\n// Exportaci\xF3n XLSX\ndocument.getElementById('export-xlsx').addEventListener('click', () => {\n    if (typeof XLSX === 'undefined') return alert('Cargando librer\xEDa...');\n    const allStudents = readLocal();\n    const wb = XLSX.utils.book_new();\n    const uniqueCareers = [...new Set(allStudents.map(s => s.carrera))];\n\n    uniqueCareers.forEach(careerCode => {\n        const studentsInCareer = allStudents\n            .filter(s => s.carrera === careerCode)\n            .sort((a, b) => a.semestre - b.semestre);\n\n        const data = studentsInCareer.map(s => {\n            const status = paymentStatus(s.id);\n            return {\n                'Semestre': s.semestre + '\xBA',\n                'N\xFAmero de Control': s.numControl, \n                'Nombre Completo': \\`\\${s.nombre} \\${s.apellidoP} \\${s.apellidoM}\\`,\n                'Carrera': CAREER_MAP[s.carrera] || s.carrera,\n                'Estado Financiero': status.text, \n                'Adeudo Pendiente': parseFloat(status.adeudo)\n            };\n        });\n\n        if (data.length > 0) {\n            const ws = XLSX.utils.json_to_sheet(data);\n            let sheetName = (CAREER_MAP[careerCode] || careerCode || 'General')\n                .replace(/[\\\\\\\\*?:/\\\\[\\\\]]/g, '').substring(0, 31);\n            XLSX.utils.book_append_sheet(wb, ws, sheetName);\n        }\n    });\n    XLSX.writeFile(wb, \\`Reporte_General_\\${new Date().toLocaleDateString().replace(/\\\\//g, '-')}.xlsx\\`);\n});\n\nwindow.onload = render;\n<\/script>"])), maybeRenderHead(), CAREERS.map((c) => renderTemplate`<option${addAttribute(c.code, "value")} data-astro-cid-65fecvdy>${c.name}</option>`), SEMESTERS.map((s) => renderTemplate`<option${addAttribute(String(s), "value")} data-astro-cid-65fecvdy>${s}ยบ Semestre</option>`), addAttribute(studentsJSON, "data-students"), addAttribute(careerMapJSON, "data-career-map")) }));
}, "C:/Users/sarah/Documents/GitHub/CBTA/Frond-end/src/pages/students.astro", void 0);

const $$file = "C:/Users/sarah/Documents/GitHub/CBTA/Frond-end/src/pages/students.astro";
const $$url = "/students";

const _page = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.defineProperty({
  __proto__: null,
  default: $$Students,
  file: $$file,
  url: $$url
}, Symbol.toStringTag, { value: 'Module' }));

const page = () => _page;

export { page };
