<!DOCTYPE html><html lang="es" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Finanzas Estudiantiles | Estudiante CBTA 71</title><link rel="icon" href="/Logo.png" type="image/png"><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet"><link rel="stylesheet" href="/_astro/Dashboard.DR7WEF1-.css">
<style>@import"https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap";:root{--primary: #112d26;--accent: #c4a47c;--bg: #f9fbfb;--white: #ffffff;--text-muted: #64748b}.page-wrapper[data-astro-cid-vbivu3ot]{max-width:1000px;margin:0 auto;padding:2rem 1.5rem;font-family:Plus Jakarta Sans,sans-serif}.main-header[data-astro-cid-vbivu3ot]{background:var(--primary);border-radius:24px;padding:2.5rem;color:#fff;margin-bottom:2.5rem}.header-content[data-astro-cid-vbivu3ot]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1.5rem}.avatar[data-astro-cid-vbivu3ot]{width:55px;height:55px;background:var(--accent);border-radius:15px;display:grid;place-items:center;color:var(--primary);font-weight:800}.balance-summary[data-astro-cid-vbivu3ot] .amount[data-astro-cid-vbivu3ot]{display:block;font-size:2rem;font-weight:800;color:var(--accent)}.modern-card[data-astro-cid-vbivu3ot]{background:#fff;border-radius:20px;padding:1.5rem;display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;box-shadow:0 4px 20px #0000000a;border:1px solid #f1f5f9}.status-indicator[data-astro-cid-vbivu3ot]{width:5px;height:50px;border-radius:10px}.status-indicator[data-astro-cid-vbivu3ot].urgent{background:#eb4d4b}.status-indicator[data-astro-cid-vbivu3ot].upcoming{background:#6ab04c}.pay-button[data-astro-cid-vbivu3ot]{background:var(--primary);color:#fff;border:none;padding:.8rem 1.5rem;border-radius:12px;font-weight:700;cursor:pointer}.modal-overlay[data-astro-cid-vbivu3ot]{position:fixed;inset:0;z-index:9999;display:flex;align-items:center;justify-content:center}.modal-backdrop[data-astro-cid-vbivu3ot]{position:absolute;inset:0;background:#112d2699;backdrop-filter:blur(8px)}.modal-sheet[data-astro-cid-vbivu3ot]{position:relative;background:#fff;width:100%;max-width:450px;border-radius:30px;overflow:hidden}.sheet-body[data-astro-cid-vbivu3ot]{padding:2rem;text-align:center}.grand-total-display[data-astro-cid-vbivu3ot]{font-size:3rem;font-weight:800;color:var(--primary);margin:0}.modern-option-item[data-astro-cid-vbivu3ot]{display:flex;align-items:center;padding:1.2rem;border:2px solid #f1f5f9;border-radius:20px;background:#fff;cursor:pointer;text-align:left;width:100%;margin-bottom:1rem}.m-option-icon[data-astro-cid-vbivu3ot]{width:45px;height:45px;border-radius:14px;display:grid;place-items:center;margin-right:1rem;font-size:1.3rem}.blue-grad[data-astro-cid-vbivu3ot]{background:#e0f2fe}.gold-grad[data-astro-cid-vbivu3ot]{background:#fef3c7}.btn-primary-action[data-astro-cid-vbivu3ot]{width:100%;background:var(--primary);color:#fff;padding:1.1rem;border-radius:15px;border:none;font-weight:800;cursor:pointer}.btn-link-action[data-astro-cid-vbivu3ot]{width:100%;background:transparent;color:var(--text-muted);border:none;cursor:pointer;text-decoration:underline;margin-top:10px}.modern-card-pill[data-astro-cid-vbivu3ot]{display:flex;align-items:center;padding:1rem;border:2px solid #f1f5f9;border-radius:18px;margin-bottom:.8rem;cursor:pointer}.custom-loader[data-astro-cid-vbivu3ot]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid var(--primary);border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 1rem}.reference-visual-card[data-astro-cid-vbivu3ot]{background:#112d26;color:#fff;padding:1.5rem;border-radius:20px;margin-bottom:1.5rem;text-align:left}.ref-number-box[data-astro-cid-vbivu3ot]{background:#fff;color:#000;padding:1rem;border-radius:10px;margin-bottom:1rem;text-align:center}.barcode-sim[data-astro-cid-vbivu3ot]{height:30px;background:repeating-linear-gradient(90deg,#000,#000 2px,#fff 2px 4px);margin-top:5px}@keyframes spin{to{transform:rotate(360deg)}}[data-astro-cid-vbivu3ot][x-cloak]{display:none!important}@media (max-width: 768px){.modal-overlay[data-astro-cid-vbivu3ot]{align-items:flex-end}.modal-sheet[data-astro-cid-vbivu3ot]{border-radius:28px 28px 0 0;max-width:100%}.modern-card[data-astro-cid-vbivu3ot]{flex-direction:column;text-align:center;gap:1rem}}
body{font-family:Inter,sans-serif;background:var(--BACKGROUND_COLOR);color:var(--TEXT_COLOR_DARK);margin:0}.sidebar-closed[data-astro-cid-iysahtsw]{transform:translate(-100%)}.transition-transform-fast[data-astro-cid-iysahtsw]{transition:transform .3s cubic-bezier(.25,.46,.45,.94)}#sidebar-menu[data-astro-cid-iysahtsw]{scrollbar-width:none}#sidebar-menu[data-astro-cid-iysahtsw]::-webkit-scrollbar{width:0;height:0}.content-fade-in[data-astro-cid-iysahtsw]{animation:fadeIn .8s cubic-bezier(.19,1,.22,1)}@keyframes fadeIn{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}.nav-active[data-astro-cid-iysahtsw]{background-color:#fff;color:var(--PRIMARY_COLOR)!important;font-weight:700;box-shadow:0 4px 12px #0000001a;border-left:5px solid var(--ACCENT_COLOR);padding-left:1rem;border-radius:12px}.nav-inactive[data-astro-cid-iysahtsw]:hover{background-color:#ffffff1a}.logout-icon-circle[data-astro-cid-iysahtsw]{background:var(--ACCENT_COLOR);color:var(--PRIMARY_COLOR);border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center}
</style><script type="module" src="/_astro/page.CZQmTZnr.js"></script></head> <body class="flex min-h-screen antialiased relative" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <nav id="sidebar-menu" class="bg-[#2e594d] text-white flex flex-col p-5 shadow-2xl z-50 overflow-y-auto
        fixed inset-0 w-full max-w-[250px] h-full transition-transform-fast sidebar-closed
        md:fixed md:top-0 md:flex md:h-screen md:w-[250px] md:shadow-lg md:rounded-r-xl" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <button id="close-sidebar-button" class="md:hidden absolute top-3 right-3 p-2 rounded-full bg-white/20 text-white" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path d="M18 6l-12 12M6 6l12 12" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg> </button> <div class="flex items-center gap-4 mb-10 pt-3 border-b border-white/10 pb-4" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <div class="h-10 w-10" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <img src="/Logo.png" alt="Logo" class="w-full h-full object-contain" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> </div> <div data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <h1 class="text-xl font-extrabold tracking-wide" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;">CBTA 71</h1> <p class="text-[9px] opacity-80 uppercase font-bold" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;">Portal Estudiante</p> </div> </div> <div class="flex-grow overflow-y-auto pr-2" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <ul id="main-navigation" class="space-y-2" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <li data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <a href="/Estudiante/PortalEstudiante" data-path="/Estudiante/PortalEstudiante" class="nav-link nav-inactive flex items-center gap-4 py-3 px-4 rounded-lg transition-all" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg>
Dashboard
</a> </li> <li data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <a href="/Estudiante/Tarjetas" data-path="/Estudiante/Tarjetas" class="nav-link nav-inactive flex items-center gap-4 py-3 px-4 rounded-lg transition-all" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg>
Mis Tarjetas
</a> </li> <li data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <a href="/Estudiante/Adeudos" data-path="/Estudiante/Adeudos" class="nav-link nav-inactive flex items-center gap-4 py-3 px-4 rounded-lg transition-all" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg>
Pagos Pendientes
</a> </li> <li data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <a href="/Estudiante/Historial" data-path="/Estudiante/Historial" class="nav-link nav-inactive flex items-center gap-4 py-3 px-4 rounded-lg transition-all" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg>
Historial
</a> </li> </ul> </div> <div class="mt-auto pt-4 border-t border-white/10" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <a href="/logout" class="flex items-center gap-4 py-3 px-4 rounded-lg text-white hover:bg-white/10 transition-colors font-bold" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <div class="logout-icon-circle" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg> </div>
Salir
</a> </div> </nav> <main class="flex-1 p-4 md:p-8 md:ml-[250px] relative" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <button id="open-sidebar-button" class="md:hidden fixed top-4 left-4 p-3 rounded-xl bg-[#2e594d] text-white shadow-xl z-40" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg> </button> <div class="h-16 md:hidden" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></div> <div class="bg-white p-6 md:p-10 rounded-[2rem] shadow-2xl content-fade-in min-h-[calc(100vh-4rem)]" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;">  <div class="page-wrapper" x-data="{ 
      showModal: false,
      step: 'select-method', 
      loading: false,
      selectedItem: null,
      selectedCard: null,
      adeudos: [],
      tarjetas: [],

      init() {
        const guardadas = localStorage.getItem('mis_tarjetas');
        this.tarjetas = guardadas ? JSON.parse(guardadas) : [{&#34;id&#34;:1,&#34;tipo&#34;:&#34;Visa&#34;,&#34;terminacion&#34;:&#34;4242&#34;,&#34;logo&#34;:&#34;https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg&#34;},{&#34;id&#34;:2,&#34;tipo&#34;:&#34;Mastercard&#34;,&#34;terminacion&#34;:&#34;8812&#34;,&#34;logo&#34;:&#34;https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg&#34;}];
        
        const adeudosGuardados = localStorage.getItem('mis_adeudos');
        this.adeudos = adeudosGuardados ? JSON.parse(adeudosGuardados) : [{&#34;id&#34;:1,&#34;concepto&#34;:&#34;Colegiatura Semestre I - 2024&#34;,&#34;monto&#34;:&#34;1,218.00&#34;,&#34;fecha&#34;:&#34;20 Dic, 2024&#34;,&#34;status&#34;:&#34;Pendiente&#34;},{&#34;id&#34;:2,&#34;concepto&#34;:&#34;Inscripci√≥n Curso Ingl√©s&#34;,&#34;monto&#34;:&#34;450.00&#34;,&#34;fecha&#34;:&#34;15 Ene, 2025&#34;,&#34;status&#34;:&#34;Pr√≥ximo&#34;},{&#34;id&#34;:3,&#34;concepto&#34;:&#34;Seguro Estudiantil Anual&#34;,&#34;monto&#34;:&#34;285.00&#34;,&#34;fecha&#34;:&#34;05 Feb, 2025&#34;,&#34;status&#34;:&#34;Pr√≥ximo&#34;}];
        if(!adeudosGuardados) localStorage.setItem('mis_adeudos', JSON.stringify(this.adeudos));
      },

      openPayment(item) {
        this.selectedItem = item;
        this.step = 'select-method';
        this.showModal = true;
      },

      processPayment(isReference = false) {
        this.loading = true;
        
        const nuevoPago = {
          id: Date.now(),
          concepto: this.selectedItem.concepto,
          monto: this.selectedItem.monto,
          fecha: new Date().toLocaleDateString('es-MX', { day: '2-digit', month: 'short', year: 'numeric' }),
          metodo: isReference ? 'Referencia / Efectivo' : (this.selectedCard.tipo + ' ‚Ä¢ ' + this.selectedCard.terminacion),
          folio: 'PAY-' + Math.floor(Math.random() * 90000 + 10000),
          categoria: isReference ? 'Tr√°mite' : 'Acad√©mico'
        };

        setTimeout(() => {
          // 1. Guardar en Historial
          const historial = JSON.parse(localStorage.getItem('historial_pagos') || '[]');
          historial.unshift(nuevoPago);
          localStorage.setItem('historial_pagos', JSON.stringify(historial));

          // 2. Borrar de Pendientes
          this.adeudos = this.adeudos.filter(a => a.id !== this.selectedItem.id);
          localStorage.setItem('mis_adeudos', JSON.stringify(this.adeudos));

          this.loading = false;
          // 3. Redirigir a la ruta exacta
          window.location.href = '/Estudiante/Historial'; 
        }, 2000);
      }
    }" data-astro-cid-vbivu3ot> <header class="main-header" data-astro-cid-vbivu3ot> <div class="header-content" data-astro-cid-vbivu3ot> <div class="user-profile" data-astro-cid-vbivu3ot> <div class="avatar" data-astro-cid-vbivu3ot>PG</div> <div class="welcome-text" data-astro-cid-vbivu3ot> <span class="greeting" data-astro-cid-vbivu3ot>Estado de Cuenta</span> <h1 x-text="'Hola, ' + '${alumnoBackend}'.split(' ')[0]" data-astro-cid-vbivu3ot></h1> </div> </div> <div class="balance-summary" data-astro-cid-vbivu3ot> <span class="label" data-astro-cid-vbivu3ot>Total por Pagar</span> <span class="amount" x-text="'$' + adeudos.reduce((acc, item) => acc + parseFloat(item.monto.replace(',','')), 0).toLocaleString('en-US', {minimumFractionDigits: 2})" data-astro-cid-vbivu3ot></span> </div> </div> </header> <main class="content-grid" data-astro-cid-vbivu3ot> <section class="section-container" data-astro-cid-vbivu3ot> <h2 class="section-title" data-astro-cid-vbivu3ot>Pagos Pendientes</h2> <template x-if="adeudos.length === 0" data-astro-cid-vbivu3ot> <div style="text-align: center; padding: 4rem; background: white; border-radius: 24px; border: 2px dashed #e2e8f0;" data-astro-cid-vbivu3ot> <p style="color: var(--text-muted); font-weight: 600;" data-astro-cid-vbivu3ot>‚ú® No tienes pagos pendientes por ahora.</p> </div> </template> <div class="cards-stack" data-astro-cid-vbivu3ot> <template x-for="item in adeudos" :key="item.id" data-astro-cid-vbivu3ot> <div class="modern-card" data-astro-cid-vbivu3ot> <div class="card-left" data-astro-cid-vbivu3ot> <div class="status-indicator" :class="item.status === 'Pendiente' ? 'urgent' : 'upcoming'" data-astro-cid-vbivu3ot></div> <div class="card-details-text" data-astro-cid-vbivu3ot> <h3 x-text="item.concepto" data-astro-cid-vbivu3ot></h3> <div class="date-row" data-astro-cid-vbivu3ot> <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-vbivu3ot><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-astro-cid-vbivu3ot></rect><line x1="16" y1="2" x2="16" y2="6" data-astro-cid-vbivu3ot></line><line x1="8" y1="2" x2="8" y2="6" data-astro-cid-vbivu3ot></line><line x1="3" y1="10" x2="21" y2="10" data-astro-cid-vbivu3ot></line></svg> <span data-astro-cid-vbivu3ot>Vence el <strong x-text="item.fecha" data-astro-cid-vbivu3ot></strong></span> </div> </div> </div> <div class="card-right" data-astro-cid-vbivu3ot> <span class="price" x-text="'$' + item.monto" data-astro-cid-vbivu3ot></span> <button @click="openPayment(item)" class="pay-button" data-astro-cid-vbivu3ot>Pagar</button> </div> </div> </template> </div> </section> </main> <div x-show="showModal" x-cloak class="modal-overlay" data-astro-cid-vbivu3ot> <div class="modal-backdrop" @click="!loading && (showModal = false)" x-show="showModal" x-transition.opacity data-astro-cid-vbivu3ot></div> <div class="modal-sheet" x-show="showModal" x-transition:enter="modal-anim-enter" x-transition:enter-start="modal-anim-start" x-transition:enter-end="modal-anim-end" data-astro-cid-vbivu3ot> <div class="sheet-handle" data-astro-cid-vbivu3ot></div> <div class="sheet-body" data-astro-cid-vbivu3ot> <div x-show="step === 'select-method'" data-astro-cid-vbivu3ot> <div class="payment-header-visual" data-astro-cid-vbivu3ot> <h2 class="grand-total-display" x-text="'$' + selectedItem?.monto" data-astro-cid-vbivu3ot></h2> <span class="concept-tag" x-text="selectedItem?.concepto" data-astro-cid-vbivu3ot></span> </div> <div class="modern-options-list" data-astro-cid-vbivu3ot> <button @click="step = 'card-list'" class="modern-option-item" data-astro-cid-vbivu3ot> <div class="m-option-icon blue-grad" data-astro-cid-vbivu3ot>üí≥</div> <div class="m-option-info" data-astro-cid-vbivu3ot><strong data-astro-cid-vbivu3ot>Tarjetas Guardadas</strong><span data-astro-cid-vbivu3ot>Usa tus tarjetas registradas</span></div> </button> <button @click="step = 'reference'" class="modern-option-item" data-astro-cid-vbivu3ot> <div class="m-option-icon gold-grad" data-astro-cid-vbivu3ot>üè¶</div> <div class="m-option-info" data-astro-cid-vbivu3ot><strong data-astro-cid-vbivu3ot>Referencia Bancaria</strong><span data-astro-cid-vbivu3ot>Pago en efectivo / OXXO</span></div> </button> </div> </div> <div x-show="step === 'card-list'" data-astro-cid-vbivu3ot> <div class="modal-step-header" style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;" data-astro-cid-vbivu3ot> <button @click="step = 'select-method'" style="background: #f1f5f9; border: none; width: 35px; height: 35px; border-radius: 50%; cursor: pointer;" data-astro-cid-vbivu3ot>‚Üê</button> <h3 style="margin: 0;" data-astro-cid-vbivu3ot>Selecciona tarjeta</h3> </div> <div class="cards-scroller" style="max-height: 300px; overflow-y: auto;" data-astro-cid-vbivu3ot> <template x-for="tarjeta in tarjetas" :key="tarjeta.id" data-astro-cid-vbivu3ot> <div @click="selectedCard = tarjeta; step = 'confirm'" class="modern-card-pill" data-astro-cid-vbivu3ot> <img :src="tarjeta.logo" style="width: 40px;" data-astro-cid-vbivu3ot> <div style="text-align: left; margin-left: 1rem;" data-astro-cid-vbivu3ot> <strong x-text="'‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ' + tarjeta.terminacion" style="font-size: 1.1rem; color: var(--primary);" data-astro-cid-vbivu3ot></strong> </div> </div> </template> </div> </div> <div x-show="step === 'confirm' || (loading && selectedCard)" data-astro-cid-vbivu3ot> <template x-if="loading" data-astro-cid-vbivu3ot> <div style="padding: 2rem 0;" data-astro-cid-vbivu3ot> <div class="custom-loader" data-astro-cid-vbivu3ot></div> <p data-astro-cid-vbivu3ot>Procesando pago seguro...</p> </div> </template> <template x-if="!loading" data-astro-cid-vbivu3ot> <div class="confirm-summary-ui" data-astro-cid-vbivu3ot> <div class="check-icon-ring" data-astro-cid-vbivu3ot>‚úì</div> <h3 data-astro-cid-vbivu3ot>Confirmar pago</h3> <div class="summary-box" data-astro-cid-vbivu3ot> <div class="summary-row" data-astro-cid-vbivu3ot><span data-astro-cid-vbivu3ot>Total:</span><strong x-text="'$' + selectedItem?.monto" data-astro-cid-vbivu3ot></strong></div> <div class="summary-row" data-astro-cid-vbivu3ot><span data-astro-cid-vbivu3ot>M√©todo:</span><span x-text="selectedCard?.tipo + ' ‚Ä¢' + selectedCard?.terminacion" data-astro-cid-vbivu3ot></span></div> </div> <button @click="processPayment(false)" class="btn-primary-action" data-astro-cid-vbivu3ot>CONFIRMAR</button> <button @click="step = 'card-list'" class="btn-link-action" data-astro-cid-vbivu3ot>Regresar</button> </div> </template> </div> <div x-show="step === 'reference' || (loading && !selectedCard)" data-astro-cid-vbivu3ot> <template x-if="loading" data-astro-cid-vbivu3ot> <div style="padding: 2rem 0;" data-astro-cid-vbivu3ot><div class="custom-loader" data-astro-cid-vbivu3ot></div><p data-astro-cid-vbivu3ot>Generando registro...</p></div> </template> <template x-if="!loading" data-astro-cid-vbivu3ot> <div data-astro-cid-vbivu3ot> <div class="reference-visual-card" data-astro-cid-vbivu3ot> <p class="ref-label" data-astro-cid-vbivu3ot>REFERENCIA DE PAGO</p> <div class="ref-number-box" data-astro-cid-vbivu3ot> <span data-astro-cid-vbivu3ot>0123 4567 8910 1112</span> <div class="barcode-sim" data-astro-cid-vbivu3ot></div> </div> <div class="ref-footer" data-astro-cid-vbivu3ot> <span data-astro-cid-vbivu3ot>Convenio: <strong data-astro-cid-vbivu3ot>CIE 163721</strong></span> <span data-astro-cid-vbivu3ot>Banco: <strong data-astro-cid-vbivu3ot>BBVA</strong></span> </div> </div> <button @click="processPayment(true)" class="btn-primary-action" data-astro-cid-vbivu3ot>GUARDAR Y FINALIZAR</button> <button @click="step = 'select-method'" class="btn-link-action" data-astro-cid-vbivu3ot>Volver</button> </div> </template> </div> </div> </div> </div> </div>  </div> </main> <script>
        const sidebar = document.getElementById('sidebar-menu');
        const openButton = document.getElementById('open-sidebar-button');
        const closeButton = document.getElementById('close-sidebar-button');
        const navLinks = document.querySelectorAll('.nav-link');
        const activeClass = 'nav-active';
        const inactiveClass = 'nav-inactive';

        function setActiveLink() {
            // Normalizar la ruta actual quitando la barra final
            let currentPath = window.location.pathname.replace(/\/$/, "");
            
            navLinks.forEach(link => {
                const linkPath = link.getAttribute('data-path').replace(/\/$/, "");
                link.classList.remove(activeClass, inactiveClass);
                
                if (linkPath === currentPath) {
                    link.classList.add(activeClass);
                } else {
                    link.classList.add(inactiveClass);
                }
            });
        }

        function openSidebar() {
            sidebar.classList.remove('sidebar-closed', 'hidden');
            openButton.style.display = 'none';
            document.body.style.overflow = 'hidden';
            if (window.innerWidth < 768) sidebar.classList.add('fixed', 'inset-0');
        }

        function closeSidebar() {
            sidebar.classList.add('sidebar-closed');
            setTimeout(() => {
                if (window.innerWidth < 768) {
                    sidebar.classList.add('hidden');
                    openButton.style.display = 'block';
                }
                document.body.style.overflow = '';
            }, 300);
        }

        openButton?.addEventListener('click', openSidebar);
        closeButton?.addEventListener('click', closeSidebar);
        
        navLinks.forEach(link => link.addEventListener('click', () => { 
            if (window.innerWidth < 768) closeSidebar(); 
        }));

        const handleResize = () => {
            if (window.innerWidth >= 768) {
                sidebar.classList.remove('hidden', 'sidebar-closed', 'inset-0');
                openButton.style.display = 'none';
                document.body.style.overflow = '';
            } else if (sidebar.classList.contains('sidebar-closed')) {
                sidebar.classList.add('hidden');
                openButton.style.display = 'block';
            }
        };

        window.addEventListener('resize', handleResize);
        window.addEventListener('load', () => { 
            handleResize(); 
            setActiveLink(); 
        });
        
        // Importante para Astro con transiciones de p√°gina
        document.addEventListener("astro:after-swap", setActiveLink);
    </script> </body> </html> 