<!DOCTYPE html><html lang="es" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Mis Métodos de Pago | Estudiante CBTA 71</title><link rel="icon" href="/Logo.png" type="image/png"><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet"><link rel="stylesheet" href="/_astro/Dashboard.BJo2pYvK.css">
<link rel="stylesheet" href="/_astro/Tarjetas.BUAHbrxI.css">
<style>body{font-family:Inter,sans-serif;background:var(--BACKGROUND_COLOR);color:var(--TEXT_COLOR_DARK);margin:0}.sidebar-closed[data-astro-cid-iysahtsw]{transform:translate(-100%)}.transition-transform-fast[data-astro-cid-iysahtsw]{transition:transform .3s cubic-bezier(.25,.46,.45,.94)}#sidebar-menu[data-astro-cid-iysahtsw]{scrollbar-width:none}#sidebar-menu[data-astro-cid-iysahtsw]::-webkit-scrollbar{width:0;height:0}.content-fade-in[data-astro-cid-iysahtsw]{animation:fadeIn .8s cubic-bezier(.19,1,.22,1)}@keyframes fadeIn{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}.nav-active[data-astro-cid-iysahtsw]{background-color:#fff;color:var(--PRIMARY_COLOR)!important;font-weight:700;box-shadow:0 4px 12px #0000001a;border-left:5px solid var(--ACCENT_COLOR);padding-left:1rem;border-radius:12px}.nav-inactive[data-astro-cid-iysahtsw]:hover{background-color:#ffffff1a}.logout-icon-circle[data-astro-cid-iysahtsw]{background:var(--ACCENT_COLOR);color:var(--PRIMARY_COLOR);border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center}
</style><script type="module" src="/_astro/page.CZQmTZnr.js"></script></head> <body class="flex min-h-screen antialiased relative" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <nav id="sidebar-menu" class="bg-[#2e594d] text-white flex flex-col p-5 shadow-2xl z-50 overflow-y-auto
        fixed inset-0 w-full max-w-[250px] h-full transition-transform-fast sidebar-closed
        md:fixed md:top-0 md:flex md:h-screen md:w-[250px] md:shadow-lg md:rounded-r-xl" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <button id="close-sidebar-button" class="md:hidden absolute top-3 right-3 p-2 rounded-full bg-white/20 text-white" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path d="M18 6l-12 12M6 6l12 12" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg> </button> <div class="flex items-center gap-4 mb-10 pt-3 border-b border-white/10 pb-4" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <div class="h-10 w-10" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <img src="/Logo.png" alt="Logo" class="w-full h-full object-contain" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> </div> <div data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <h1 class="text-xl font-extrabold tracking-wide" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;">CBTA 71</h1> <p class="text-[9px] opacity-80 uppercase font-bold" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;">Portal Estudiante</p> </div> </div> <div class="flex-grow overflow-y-auto pr-2" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <ul id="main-navigation" class="space-y-2" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <li data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <a href="/Estudiante/PortalEstudiante" data-path="/Estudiante/PortalEstudiante" class="nav-link nav-inactive flex items-center gap-4 py-3 px-4 rounded-lg transition-all" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg>
Dashboard
</a> </li> <li data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <a href="/Estudiante/Tarjetas" data-path="/Estudiante/Tarjetas" class="nav-link nav-inactive flex items-center gap-4 py-3 px-4 rounded-lg transition-all" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg>
Mis Tarjetas
</a> </li> <li data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <a href="/Estudiante/Adeudos" data-path="/Estudiante/Adeudos" class="nav-link nav-inactive flex items-center gap-4 py-3 px-4 rounded-lg transition-all" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg>
Pagos Pendientes
</a> </li> <li data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <a href="/Estudiante/Historial" data-path="/Estudiante/Historial" class="nav-link nav-inactive flex items-center gap-4 py-3 px-4 rounded-lg transition-all" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg>
Historial
</a> </li> </ul> </div> <div class="mt-auto pt-4 border-t border-white/10" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <a href="/logout" class="flex items-center gap-4 py-3 px-4 rounded-lg text-white hover:bg-white/10 transition-colors font-bold" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <div class="logout-icon-circle" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg> </div>
Salir
</a> </div> </nav> <main class="flex-1 p-4 md:p-8 md:ml-[250px] relative" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <button id="open-sidebar-button" class="md:hidden fixed top-4 left-4 p-3 rounded-xl bg-[#2e594d] text-white shadow-xl z-40" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg> </button> <div class="h-16 md:hidden" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></div> <div class="bg-white p-6 md:p-10 rounded-[2rem] shadow-2xl content-fade-in min-h-[calc(100vh-4rem)]" data-astro-cid-iysahtsw style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;">  <div class="page-wrapper" x-data="{ 
      showModal: false,
      alumno: 'Pedro Gonzalez Lopez',
      tarjetas: [],
      form: { numero: '', titular: '', mes: '', anio: '', cvv: '' },

      // 1. Cargar tarjetas al iniciar
      init() {
        const guardadas = localStorage.getItem('mis_tarjetas');
        if (guardadas) {
          this.tarjetas = JSON.parse(guardadas);
        } else {
          this.tarjetas = [{&#34;id&#34;:1,&#34;tipo&#34;:&#34;Mastercard&#34;,&#34;terminacion&#34;:&#34;5080&#34;,&#34;vencimiento&#34;:&#34;05/27&#34;,&#34;logo&#34;:&#34;https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg&#34;},{&#34;id&#34;:2,&#34;tipo&#34;:&#34;Visa&#34;,&#34;terminacion&#34;:&#34;4242&#34;,&#34;vencimiento&#34;:&#34;12/26&#34;,&#34;logo&#34;:&#34;https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg&#34;}];
          this.actualizarStorage();
        }
      },

      actualizarStorage() {
        localStorage.setItem('mis_tarjetas', JSON.stringify(this.tarjetas));
      },

      formatCardNumber(value) {
        return value.replace(/\D/g, '').replace(/(.{4})/g, '$1 ').trim();
      },

      get cardType() {
        const num = this.form.numero.replace(/\s/g, '');
        if (num.startsWith('4')) return 'Visa';
        if (num.startsWith('5')) return 'Mastercard';
        return '';
      },

      guardarTarjeta() {
        const numLimpio = this.form.numero.replace(/\s/g, '');
        if (numLimpio.length < 15) return alert('Número de tarjeta no válido');
        
        const nueva = {
          id: Date.now(),
          tipo: this.cardType || 'Tarjeta',
          terminacion: numLimpio.slice(-4),
          vencimiento: this.form.mes + '/' + this.form.anio,
          logo: this.cardType === 'Visa' 
            ? 'https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg' 
            : 'https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg'
        };
        
        this.tarjetas.push(nueva);
        this.actualizarStorage(); // 2. Guardar permanentemente
        this.showModal = false;
        this.form = { numero: '', titular: '', mes: '', anio: '', cvv: '' };
      },

      eliminarTarjeta(id) {
        this.tarjetas = this.tarjetas.filter(t => t.id !== id);
        this.actualizarStorage(); // 3. Actualizar después de eliminar
      }
    }" data-astro-cid-r363qbm5> <header class="main-header" data-astro-cid-r363qbm5> <div class="header-content" data-astro-cid-r363qbm5> <div class="user-profile" data-astro-cid-r363qbm5> <div class="avatar" data-astro-cid-r363qbm5> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="svg-icon" data-astro-cid-r363qbm5> <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" data-astro-cid-r363qbm5></path> <circle cx="12" cy="7" r="4" data-astro-cid-r363qbm5></circle> </svg> </div> <div class="welcome-text" data-astro-cid-r363qbm5> <span class="greeting" data-astro-cid-r363qbm5>Métodos de Pago</span> <h1 x-text="'Hola, ' + alumno.split(' ')[0]" data-astro-cid-r363qbm5></h1> </div> </div> <div class="balance-summary" data-astro-cid-r363qbm5> <span class="label" data-astro-cid-r363qbm5>Tarjetas Vinculadas</span> <span class="amount" x-text="tarjetas.length" data-astro-cid-r363qbm5></span> </div> </div> </header> <main class="content-grid" data-astro-cid-r363qbm5> <section class="section-container" data-astro-cid-r363qbm5> <div class="section-header" data-astro-cid-r363qbm5> <h2 class="section-title" data-astro-cid-r363qbm5>Mis Tarjetas</h2> <button @click="showModal = true" class="add-inline-btn" data-astro-cid-r363qbm5>
+ Añadir Nueva
</button> </div> <div class="cards-stack" data-astro-cid-r363qbm5> <template x-for="tarjeta in tarjetas" :key="tarjeta.id" data-astro-cid-r363qbm5> <div class="modern-card" data-astro-cid-r363qbm5> <div class="card-left" data-astro-cid-r363qbm5> <div class="bank-logo-container" data-astro-cid-r363qbm5> <img :src="tarjeta.logo" alt="logo" class="bank-logo" data-astro-cid-r363qbm5> </div> <div class="details" data-astro-cid-r363qbm5> <h3 x-text="'•••• ' + tarjeta.terminacion" data-astro-cid-r363qbm5></h3> <p class="date" data-astro-cid-r363qbm5> <span x-text="tarjeta.tipo" data-astro-cid-r363qbm5></span> | Exp: <span x-text="tarjeta.vencimiento" data-astro-cid-r363qbm5></span> </p> </div> </div> <button @click="eliminarTarjeta(tarjeta.id)" class="delete-btn" data-astro-cid-r363qbm5> <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-r363qbm5><path d="M3 6h18m-2 0v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" data-astro-cid-r363qbm5></path></svg> </button> </div> </template> <template x-if="tarjetas.length === 0" data-astro-cid-r363qbm5> <div class="empty-state" @click="showModal = true" style="text-align: center; padding: 3rem; background: white; border-radius: 24px; cursor: pointer; border: 2px dashed #e2e8f0;" data-astro-cid-r363qbm5> <p style="color: #64748b; font-weight: 600;" data-astro-cid-r363qbm5>No tienes tarjetas registradas. Toca para añadir una.</p> </div> </template> </div> </section> </main> <div x-show="showModal" x-cloak class="modal-overlay" data-astro-cid-r363qbm5> <div class="modal-backdrop" @click="showModal = false" x-show="showModal" x-transition.opacity data-astro-cid-r363qbm5></div> <div class="modal-sheet" x-show="showModal" x-transition:enter="transition ease-out duration-300 transform" x-transition:enter-start="translate-y-full md:translate-y-4 md:opacity-0" x-transition:enter-end="translate-y-0 md:translate-y-0 md:opacity-100" data-astro-cid-r363qbm5> <div class="sheet-handle" data-astro-cid-r363qbm5></div> <div class="sheet-body" data-astro-cid-r363qbm5> <div class="payment-header" data-astro-cid-r363qbm5> <h2 class="grand-total" data-astro-cid-r363qbm5>Nueva Tarjeta</h2> <p class="subtitle" data-astro-cid-r363qbm5>Ingresa los datos de tu método de pago</p> </div> <div class="card-form-grid" data-astro-cid-r363qbm5> <div class="input-field" data-astro-cid-r363qbm5> <label data-astro-cid-r363qbm5>Número de Tarjeta</label> <div class="input-wrapper" data-astro-cid-r363qbm5> <input type="text" x-model="form.numero" @input="form.numero = formatCardNumber($event.target.value)" maxlength="19" inputmode="numeric" placeholder="0000 0000 0000 0000" data-astro-cid-r363qbm5> <span class="card-hint" x-text="cardType" data-astro-cid-r363qbm5></span> </div> </div> <div class="input-field" data-astro-cid-r363qbm5> <label data-astro-cid-r363qbm5>Titular</label> <input type="text" x-model="form.titular" placeholder="NOMBRE COMPLETO" class="uppercase" data-astro-cid-r363qbm5> </div> <div class="input-row" data-astro-cid-r363qbm5> <div class="input-field" data-astro-cid-r363qbm5> <label data-astro-cid-r363qbm5>Vencimiento</label> <div class="expiry-group" data-astro-cid-r363qbm5> <input type="text" x-model="form.mes" placeholder="MM" maxlength="2" inputmode="numeric" data-astro-cid-r363qbm5> <span class="sep" data-astro-cid-r363qbm5>/</span> <input type="text" x-model="form.anio" placeholder="AA" maxlength="2" inputmode="numeric" data-astro-cid-r363qbm5> </div> </div> <div class="input-field" data-astro-cid-r363qbm5> <label data-astro-cid-r363qbm5>CVV</label> <input type="password" x-model="form.cvv" placeholder="***" maxlength="3" inputmode="numeric" data-astro-cid-r363qbm5> </div> </div> <div class="button-group" data-astro-cid-r363qbm5> <button @click="guardarTarjeta()" class="btn-primary-action" data-astro-cid-r363qbm5>VINCULAR TARJETA</button> <button @click="showModal = false" class="btn-secondary-action" data-astro-cid-r363qbm5>Cancelar</button> </div> </div> </div> </div> </div> </div>  </div> </main> <script>
        const sidebar = document.getElementById('sidebar-menu');
        const openButton = document.getElementById('open-sidebar-button');
        const closeButton = document.getElementById('close-sidebar-button');
        const navLinks = document.querySelectorAll('.nav-link');
        const activeClass = 'nav-active';
        const inactiveClass = 'nav-inactive';

        function setActiveLink() {
            // Normalizar la ruta actual quitando la barra final
            let currentPath = window.location.pathname.replace(/\/$/, "");
            
            navLinks.forEach(link => {
                const linkPath = link.getAttribute('data-path').replace(/\/$/, "");
                link.classList.remove(activeClass, inactiveClass);
                
                if (linkPath === currentPath) {
                    link.classList.add(activeClass);
                } else {
                    link.classList.add(inactiveClass);
                }
            });
        }

        function openSidebar() {
            sidebar.classList.remove('sidebar-closed', 'hidden');
            openButton.style.display = 'none';
            document.body.style.overflow = 'hidden';
            if (window.innerWidth < 768) sidebar.classList.add('fixed', 'inset-0');
        }

        function closeSidebar() {
            sidebar.classList.add('sidebar-closed');
            setTimeout(() => {
                if (window.innerWidth < 768) {
                    sidebar.classList.add('hidden');
                    openButton.style.display = 'block';
                }
                document.body.style.overflow = '';
            }, 300);
        }

        openButton?.addEventListener('click', openSidebar);
        closeButton?.addEventListener('click', closeSidebar);
        
        navLinks.forEach(link => link.addEventListener('click', () => { 
            if (window.innerWidth < 768) closeSidebar(); 
        }));

        const handleResize = () => {
            if (window.innerWidth >= 768) {
                sidebar.classList.remove('hidden', 'sidebar-closed', 'inset-0');
                openButton.style.display = 'none';
                document.body.style.overflow = '';
            } else if (sidebar.classList.contains('sidebar-closed')) {
                sidebar.classList.add('hidden');
                openButton.style.display = 'block';
            }
        };

        window.addEventListener('resize', handleResize);
        window.addEventListener('load', () => { 
            handleResize(); 
            setActiveLink(); 
        });
        
        // Importante para Astro con transiciones de página
        document.addEventListener("astro:after-swap", setActiveLink);
    </script> </body> </html> 