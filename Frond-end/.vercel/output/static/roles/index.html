<!DOCTYPE html><html lang="es" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Gesti贸n de Personal | CBTA 71 | CBTA 71</title><link rel="icon" href="/Logo.png" type="image/png"><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet"><link rel="stylesheet" href="/_astro/Dashboard.BUD5b-LF.css">
<style>[x-cloak]{display:none!important}.bg-institucional{background-color:#2e594d}.text-institucional{color:#2e594d}.border-institucional{border-color:#2e594d}.hover-institucional:hover{background-color:#234238}.input-institucional:focus{outline:none;border-color:#2e594d;box-shadow:0 0 0 3px #2e594d1a}table.stats-table{table-layout:fixed!important;width:100%!important;border-collapse:collapse}table.stats-table td{width:33.333%!important}.dropzone-active{border-color:#2e594d;background-color:#2e594d0d}@media (max-width: 768px){.table-responsive{overflow-x:auto}}
body{font-family:Inter,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:var(--BACKGROUND_COLOR);color:var(--TEXT_COLOR_DARK)}.sidebar-closed[data-astro-cid-sckkx6r4]{transform:translate(-100%)}.transition-transform-fast[data-astro-cid-sckkx6r4]{transition:transform .3s cubic-bezier(.25,.46,.45,.94)}#sidebar-menu[data-astro-cid-sckkx6r4]{scrollbar-width:none}#sidebar-menu[data-astro-cid-sckkx6r4]::-webkit-scrollbar{width:0;height:0}.content-fade-in[data-astro-cid-sckkx6r4]{animation:fadeIn .8s cubic-bezier(.19,1,.22,1)}@keyframes fadeIn{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}.nav-active[data-astro-cid-sckkx6r4]{background-color:#fff;color:var(--PRIMARY_COLOR);font-weight:700;box-shadow:0 4px 12px #00000026;border-left:5px solid var(--ACCENT_COLOR);padding-left:1rem}.nav-inactive[data-astro-cid-sckkx6r4]:hover{background-color:#fff3;color:#fff}
</style><script type="module" src="/_astro/page.C2J1FJ8k.js"></script></head> <body class="flex min-h-screen antialiased" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <nav id="sidebar-menu" class="bg-[#2e594d] text-white flex-col p-5 shadow-2xl z-50 overflow-y-auto
		fixed inset-0 w-full max-w-[250px] h-full transition-transform-fast sidebar-closed
		md:fixed md:top-0 md:flex md:h-screen md:w-[250px] md:shadow-lg md:rounded-r-xl" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;">  <button id="close-sidebar-button" class="md:hidden absolute top-3 right-3 p-2 rounded-full bg-white/20 hover:bg-white/40 z-50 transition text-white" aria-label="Cerrar men煤 lateral" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path stroke="none" d="M0 0h24v24H0z" fill="none" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M18 6l-12 12" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M6 6l12 12" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg> </button>  <div class="flex items-center gap-4 mb-10 pt-3 border-b border-white/10 pb-4" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <div class="h-10 w-10" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <img src="/Logo.png" alt="Logo CBTA 71" class="w-full h-full object-contain" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> </div> <div data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <h1 class="text-xl font-extrabold tracking-wide" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;">CBTA 71</h1> <p class="text-xs opacity-80" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;">Sistema Administrativo</p> </div> </div>  <div class="flex-grow overflow-y-auto pr-2" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <ul id="main-navigation" class="space-y-2" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;">  <li data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <a href="/Dashboard" data-path="/Dashboard" class="nav-link nav-inactive flex items-center gap-4 py-3 px-4 rounded-lg transition-all duration-200" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path stroke="none" d="M0 0h24v24H0z" fill="none" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M3 3v18h18" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M18 17v-4" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M12 17v-8" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M6 17v-2" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg>
Dashboard
</a> </li>  <li data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <a href="/concepts" data-path="/concepts" class="nav-link nav-inactive flex items-center gap-4 py-3 px-4 rounded-lg transition-all duration-200" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path stroke="none" d="M0 0h24v24H0z" fill="none" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M13.5 6.5l4 4" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M19 16v3h-3" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg>
Conceptos
</a> </li>  <li data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <a href="/students" data-path="/students" class="nav-link nav-inactive flex items-center gap-4 py-3 px-4 rounded-lg transition-all duration-200" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path stroke="none" d="M0 0h24v24H0z" fill="none" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M16 3.125a4 4 0 1 1 0 7.75" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M21 21v-2a4 4 0 0 0 -3 -3.85" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg>
Estudiantes
</a> </li>  <li data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <a href="/payments" data-path="/payments" class="nav-link nav-inactive flex items-center gap-4 py-3 px-4 rounded-lg transition-all duration-200" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path stroke="none" d="M0 0h24v24H0z" fill="none" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M9 14h-2a2 2 0 0 1 -2 -2v-6a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-2" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M12 17v-1h-3a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3v1" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg>
Pagos
</a> </li>  <li data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <a href="/debts" data-path="/debts" class="nav-link nav-inactive flex items-center gap-4 py-3 px-4 rounded-lg transition-all duration-200" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path stroke="none" d="M0 0h24v24H0z" fill="none" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M14 3v4a1 1 0 0 0 1 1h4" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M10 12l4 4m0 -4l-4 4" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg>
Adeudos
</a> </li>  <li data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <a href="/roles" data-path="/roles" class="nav-link nav-inactive flex items-center gap-4 py-3 px-4 rounded-lg transition-all duration-200" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path stroke="none" d="M0 0h24v24H0z" fill="none" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M12 10a2 2 0 0 1 2 2a2 2 0 0 1 2 2a2 2 0 0 1 -2 2h-4a2 2 0 0 1 -2 -2a2 2 0 0 1 2 -2a2 2 0 0 1 2 -2z" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg>
Roles y Usuarios
</a> </li> </ul> </div>  <div class="mt-auto pt-4 border-t border-white/10" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <ul class="space-y-2" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <li data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <a href="/logout" class="flex items-center gap-4 py-3 px-4 rounded-lg text-white hover:bg-white/10 transition-colors duration-200" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path stroke="none" d="M0 0h24v24H0z" fill="none" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M7 12h14l-3 -3m0 6l3 -3" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg>
Salir
</a> </li> </ul> </div> </nav>  <main class="flex-1 p-4 md:p-8 overflow-y-auto md:ml-[250px] relative" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;">  <button id="open-sidebar-button" class="md:hidden fixed top-4 left-4 p-3 rounded-xl bg-[${PRIMARY_COLOR}] text-white shadow-xl z-40 transition hover:bg-[#256d5e]" aria-label="Abrir men煤 lateral" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"><path stroke="none" d="M0 0h24v24H0z" fill="none" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M4 6l16 0" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M4 12l16 0" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path><path d="M4 18l16 0" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></path></svg> </button> <div class="h-16 md:hidden" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;"></div>  <div class="bg-white p-6 md:p-8 rounded-xl shadow-2xl content-fade-in min-h-[calc(100vh-4rem)]" data-astro-cid-sckkx6r4 style="--PRIMARY_COLOR: #2e594d;--ACCENT_COLOR: #86efad;--BACKGROUND_COLOR: #d9dde2;--TEXT_COLOR_DARK: #374151;">  <script src="/js/xlsx.min.js"></script>  <div x-data="rolesData" class="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-4 md:p-8"> <template x-teleport="body"> <div x-show="notification.show" x-cloak x-transition:enter="transition ease-out duration-300" class="fixed top-5 right-5 z-[100] p-4 rounded-xl shadow-2xl text-white font-bold" :class="notification.type === 'success' ? 'bg-institucional' : 'bg-red-600'"> <span x-text="notification.message"></span> </div> </template> <div class="mb-8"> <div class="flex flex-col md:flex-row md:items-center justify-between gap-4"> <div class="text-left"> <h1 class="text-3xl font-bold text-slate-800 mb-1">Gesti贸n de Personal</h1> <p class="text-slate-500">Administraci贸n de usuarios y roles del sistema</p> </div> <div class="flex flex-wrap gap-3"> <button @click="openImportModal()" class="px-5 py-2.5 bg-white border-2 border-institucional text-institucional font-semibold rounded-lg hover:bg-slate-50 transition-all flex items-center gap-2"> <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path> </svg>
Importar Excel
</button> <button @click="openPanelForAdd()" class="px-5 py-2.5 bg-institucional text-white font-semibold rounded-lg hover-institucional transition-all flex items-center gap-2 shadow-md"> <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path> </svg>
Agregar Usuario
</button> </div> </div> </div> <div class="bg-white rounded-xl shadow-sm border border-slate-200 mb-6 overflow-hidden"> <table class="stats-table"> <tbody> <tr class="divide-x divide-slate-200"> <td class="p-6 hover:bg-slate-50 transition-colors"> <div class="flex items-center gap-4"> <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0"> <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path> </svg> </div> <div class="flex-1 min-w-0"> <p class="text-xs text-slate-500 font-medium uppercase tracking-wide">Total Usuarios</p> <p class="text-2xl font-bold text-slate-800" x-text="users.length"></p> </div> </div> </td> <td class="p-6 hover:bg-slate-50 transition-colors"> <div class="flex items-center gap-4"> <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0"> <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path> </svg> </div> <div class="flex-1 min-w-0"> <p class="text-xs text-slate-500 font-medium uppercase tracking-wide">Usuarios Activos</p> <p class="text-2xl font-bold text-green-600" x-text="users.filter(u => u.status === 'activo').length"></p> </div> </div> </td> <td class="p-6 hover:bg-slate-50 transition-colors"> <div class="flex items-center gap-4"> <div class="w-12 h-12 bg-institucional bg-opacity-10 rounded-lg flex items-center justify-center flex-shrink-0"> <svg class="w-6 h-6 text-institucional" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path> </svg> </div> <div class="flex-1 min-w-0"> <p class="text-xs text-slate-500 font-medium uppercase tracking-wide">Administradores</p> <p class="text-2xl font-bold text-institucional" x-text="users.filter(u => u.role === 'Administrador').length"></p> </div> </div> </td> </tr> </tbody> </table> </div> <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden"> <div class="overflow-x-auto"> <table class="w-full"> <thead class="bg-gradient-to-r from-slate-50 to-slate-100 border-b-2 border-slate-200"> <tr> <th class="px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase tracking-wider">Usuario</th> <th class="px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase tracking-wider">Contacto</th> <th class="px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase tracking-wider">CURP</th> <th class="px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase tracking-wider">Rol</th> <th class="px-6 py-4 text-left text-xs font-bold text-slate-600 uppercase tracking-wider">Estado</th> <th class="px-6 py-4 text-right text-xs font-bold text-slate-600 uppercase tracking-wider">Acciones</th> </tr> </thead> <tbody class="divide-y divide-slate-100"> <template x-for="user in filteredUsers" :key="user.id"> <tr class="hover:bg-slate-50 transition-colors"> <td class="px-6 py-4"> <div class="flex items-center gap-3"> <div class="w-10 h-10 rounded-full bg-gradient-to-br from-institucional to-teal-600 flex items-center justify-center text-white font-bold"> <span x-text="(user.name.charAt(0) + user.last_name.charAt(0)).toUpperCase()"></span> </div> <div> <div class="font-semibold text-slate-800" x-text="`${user.name} ${user.last_name}`"></div> <div class="text-xs text-slate-500" x-text="user.gender === 'hombre' ? 'Masculino' : 'Femenino'"></div> </div> </div> </td> <td class="px-6 py-4"> <div class="text-sm text-slate-700" x-text="user.email"></div> <div class="text-xs text-slate-500" x-text="user.phone_number"></div> </td> <td class="px-6 py-4"> <div class="text-xs font-mono text-slate-600 bg-slate-100 px-2 py-1 rounded inline-block" x-text="user.curp"></div> </td> <td class="px-6 py-4"> <span class="px-3 py-1.5 rounded-full text-xs font-semibold inline-flex items-center gap-1" :class="{
                                              'bg-purple-100 text-purple-700': user.role === 'Administrador',
                                              'bg-blue-100 text-blue-700': user.role === 'Caja',
                                              'bg-green-100 text-green-700': user.role === 'Maestro'
                                          }" x-text="user.role"></span> </td> <td class="px-6 py-4"> <span class="px-3 py-1 rounded-full text-xs font-semibold" :class="user.status === 'activo' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'" x-text="user.status === 'activo' ? 'Activo' : 'Inactivo'"></span> </td> <td class="px-6 py-4 text-right"> <div class="flex items-center justify-end gap-2"> <button @click="openPanelForEdit(user)" class="p-2 text-slate-400 hover:text-institucional hover:bg-slate-100 rounded-lg transition-colors" title="Editar"> <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path> </svg> </button> <button @click="confirmDeleteUser(user)" class="p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors" title="Eliminar"> <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path> </svg> </button> </div> </td> </tr> </template> </tbody> </table> </div> </div> <div x-show="isPanelOpen" x-cloak class="fixed inset-0 z-[110] flex items-center justify-center p-4"> <div x-show="isPanelOpen" x-transition.opacity @click="closePanel()" class="absolute inset-0 bg-slate-900/60 backdrop-blur-md"></div> <div x-show="isPanelOpen" x-transition:enter="transition ease-out duration-300 transform" x-transition:enter-start="opacity-0 scale-95" x-transition:enter-end="opacity-100 scale-100" x-transition:leave="transition ease-in duration-200 transform" x-transition:leave-start="opacity-100 scale-100" x-transition:leave-end="opacity-0 scale-95" class="relative bg-white rounded-2xl p-6 sm:p-8 shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto"> <button @click="closePanel()" class="absolute top-4 right-4 p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors"> <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path> </svg> </button> <div class="mb-6"> <h2 class="text-2xl font-black text-institucional mb-2" x-text="isEditing ? 'Editar Colaborador' : 'Registrar Administrador/Personal'"></h2> <p class="text-xs text-slate-500 flex items-start gap-2"> <svg class="w-4 h-4 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"> <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path> </svg> <span>La contrase帽a se genera autom谩ticamente por el sistema y se enviar谩 al email del usuario.</span> </p> </div> <form @submit.prevent="saveUser()" class="space-y-4"> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4"> <div> <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Nombre(s)</label> <input x-model="newUser.name" type="text" required class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl input-institucional"> </div> <div> <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Apellidos</label> <input x-model="newUser.last_name" type="text" required class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl input-institucional"> </div> </div> <div class="sm:col-span-2"> <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Email</label> <input x-model="newUser.email" type="email" required class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl input-institucional"> </div> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:col-span-2"> <div> <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Tel茅fono</label> <input x-model="newUser.phone_number" type="tel" pattern="[0-9]{10}" placeholder="5512345678" required class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl input-institucional"> </div> <div> <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Fecha Nacimiento</label> <input x-model="newUser.birthdate" type="date" required class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl input-institucional"> </div> </div> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:col-span-2"> <div> <label class="block text-xs font-bold text-slate-400 uppercase mb-2">G茅nero</label> <select x-model="newUser.gender" required class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl input-institucional"> <option value="hombre">Hombre</option> <option value="mujer">Mujer</option> </select> </div> <div> <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Tipo de Sangre</label> <select x-model="newUser.blood_type" required class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl input-institucional"> <option value="O+">O+</option> <option value="O-">O-</option> <option value="A+">A+</option> <option value="A-">A-</option> <option value="B+">B+</option> <option value="B-">B-</option> <option value="AB+">AB+</option> <option value="AB-">AB-</option> </select> </div> </div> <div class="sm:col-span-2"> <label class="block text-xs font-bold text-slate-400 uppercase mb-2">CURP</label> <input x-model="newUser.curp" type="text" pattern="[A-Z]{4}[0-9]{6}[A-Z]{6}[0-9]{2}" maxlength="18" placeholder="PELJ000512HDFRPN09" required class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl input-institucional uppercase"> </div> <div class="sm:col-span-2"> <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Calle y N煤mero</label> <input x-model="newUser.address[0]" type="text" required class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl input-institucional"> </div> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:col-span-2"> <div> <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Colonia</label> <input x-model="newUser.address[1]" type="text" required class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl input-institucional"> </div> <div> <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Ciudad/Estado</label> <input x-model="newUser.address[2]" type="text" required class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl input-institucional"> </div> </div> <div class="sm:col-span-2"> <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Asignar Rol</label> <select x-model="newUser.role" required class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl input-institucional font-semibold"> <option value="Administrador">Administrador</option> <option value="Caja">Personal de Caja</option> <option value="Maestro">Maestro</option> </select> </div> <div class="flex flex-col sm:flex-row gap-3 pt-6 sm:col-span-2"> <button type="button" @click="closePanel()" :disabled="isSaving" class="flex-1 py-3 font-bold text-slate-600 hover:bg-slate-100 rounded-xl disabled:opacity-50 border-2 border-slate-200 transition-colors">Cancelar</button> <button type="submit" :disabled="isSaving" class="flex-1 py-3 bg-institucional text-white font-bold rounded-xl shadow-lg hover-institucional disabled:opacity-50 disabled:cursor-not-allowed transition-colors"> <span x-show="!isSaving" x-text="isEditing ? 'Actualizar Datos' : 'Registrar Ahora'"></span> <span x-show="isSaving" class="flex items-center justify-center gap-2"> <svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path> </svg>
Guardando...
</span> </button> </div> </form> </div> </div> <template x-teleport="body"> <div x-show="isDeleting" x-cloak class="fixed inset-0 z-[120] flex items-center justify-center p-4"> <div @click="isDeleting = false" class="absolute inset-0 bg-slate-900/60 backdrop-blur-md"></div> <div class="relative bg-white rounded-2xl p-8 w-full max-w-sm text-center shadow-2xl"> <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"> <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path> </svg> </div> <h3 class="text-xl font-bold text-slate-800 mb-2">驴Eliminar usuario?</h3> <p class="text-slate-500 text-sm mb-6" x-text="`Se eliminar谩 permanentemente a ${userToDeleteName}`"></p> <div class="flex gap-3"> <button @click="isDeleting = false" class="flex-1 py-3 bg-slate-100 hover:bg-slate-200 rounded-lg font-semibold transition-colors">Cancelar</button> <button @click="deleteUser(userToDeleteId)" class="flex-1 py-3 bg-red-500 hover:bg-red-600 text-white rounded-lg font-semibold transition-colors">Eliminar</button> </div> </div> </div> </template> <template x-teleport="body"> <div x-show="isImporting" x-cloak class="fixed inset-0 z-[120] flex items-center justify-center p-4"> <div @click="isImporting = false" class="absolute inset-0 bg-slate-900/60 backdrop-blur-md"></div> <div class="relative bg-white rounded-2xl p-8 w-full max-w-2xl shadow-2xl"> <h3 class="text-2xl font-bold text-slate-800 mb-2">Importar Usuarios desde Excel</h3> <p class="text-slate-500 text-sm mb-6">Carga un archivo Excel con los datos de m煤ltiples usuarios para registrarlos masivamente</p> <div @dragover.prevent="isDragging = true" @dragleave.prevent="isDragging = false" @drop.prevent="handleFileDrop($event)" :class="isDragging ? 'dropzone-active' : ''" class="border-2 border-dashed border-slate-300 rounded-xl p-8 text-center transition-all cursor-pointer hover:border-institucional" @click="$refs.fileInput.click()"> <input type="file" x-ref="fileInput" @change="handleFileSelect($event)" accept=".xlsx,.xls" class="hidden"> <svg class="w-16 h-16 mx-auto text-slate-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path> </svg> <p class="text-slate-700 font-semibold mb-2">Arrastra tu archivo Excel aqu铆</p> <p class="text-slate-500 text-sm mb-4">o haz clic para seleccionar</p> <p class="text-xs text-slate-400">Formatos aceptados: .xlsx, .xls</p> </div> <div x-show="selectedFile" class="mt-4 p-4 bg-slate-50 rounded-lg flex items-center gap-3"> <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path> </svg> <div class="flex-1"> <p class="font-semibold text-slate-800" x-text="selectedFile?.name"></p> <p class="text-xs text-slate-500" x-text="selectedFile ? `${(selectedFile.size / 1024).toFixed(2)} KB` : ''"></p> </div> <button @click="selectedFile = null; importedData = []" class="p-2 text-slate-400 hover:text-red-500"> <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path> </svg> </button> </div> <div x-show="importedData.length > 0" class="mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg"> <p class="text-sm text-blue-800"> <span class="font-bold" x-text="importedData.length"></span> usuario(s) detectado(s) en el archivo
</p> </div> <div class="mt-6 p-4 bg-amber-50 border border-amber-200 rounded-lg"> <p class="text-sm font-semibold text-amber-900 mb-2"> Formato requerido:</p> <div class="text-xs text-amber-700 font-mono bg-white p-2 rounded break-all">
name | last_name | email | phone_number | birthdate | gender | curp | address_line1 | address_line2 | address_line3 | blood_type | role
</div> <button @click="downloadTemplate()" class="mt-3 text-xs text-institucional hover:underline font-semibold">
猬锔 Descargar plantilla de ejemplo
</button> </div> <div class="flex gap-3 mt-6"> <button @click="closeImportModal()" class="flex-1 py-3 bg-slate-100 hover:bg-slate-200 rounded-lg font-semibold transition-colors">Cancelar</button> <button @click="processImport()" :disabled="importedData.length === 0" class="flex-1 py-3 bg-institucional hover-institucional text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
Importar <span x-text="importedData.length"></span> Usuario(s)
</button> </div> </div> </div> </template> </div>  </div> </main> <script>
		const sidebar = document.getElementById('sidebar-menu');
		const openButton = document.getElementById('open-sidebar-button');
		const closeButton = document.getElementById('close-sidebar-button');
		const navLinks = document.querySelectorAll('.nav-link');
		const activeClass = 'nav-active';
		const inactiveClass = 'nav-inactive';


		function setActiveLink() {
			// Normaliza la ruta actual: / o /Dashboard
			let currentPath = window.location.pathname.replace(/\/$/, "");
			if (currentPath === "") currentPath = "/Dashboard";
			
			navLinks.forEach(link => {
				const linkPath = link.getAttribute('data-path');
				
				link.classList.remove(activeClass, inactiveClass);


				if (linkPath === currentPath) {
					link.classList.add(activeClass);
				} else {
					link.classList.add(inactiveClass);
				}
			});
		}


		function openSidebar() {
			sidebar.classList.remove('sidebar-closed', 'hidden');
			openButton.style.display = 'none';
			document.body.style.overflow = 'hidden';
			if (window.innerWidth < 768) {
				sidebar.classList.remove('hidden');
				sidebar.classList.add('fixed', 'inset-0');
			}
		}

		function closeSidebar() {
			sidebar.classList.add('sidebar-closed');
			// Usamos setTimeout solo para acciones despu茅s de la transici贸n
			setTimeout(() => {
				if (window.innerWidth < 768) {
					sidebar.classList.add('hidden');
					sidebar.classList.remove('fixed', 'inset-0');
					openButton.style.display = 'block';
				}
				document.body.style.overflow = '';
			}, 300); // 300ms = duraci贸n de la transici贸n CSS
		}


		openButton?.addEventListener('click', openSidebar);
		closeButton?.addEventListener('click', closeSidebar);
		
		// Cerrar sidebar en m贸vil al hacer click en un enlace
		navLinks.forEach(link => link.addEventListener('click', (e) => {
			if (window.innerWidth < 768) closeSidebar();
			// No llamar setActiveLink aqu铆, sino dejar que Astro lo maneje o window.load
		}));


		const handleResize = () => {
			if (window.innerWidth >= 768) {
				// Desktop: Sidebar siempre visible y abierto
				sidebar.classList.remove('hidden', 'sidebar-closed', 'inset-0');
				openButton.style.display = 'none';
				document.body.style.overflow = '';
			} else {
				// Mobile: Ocultar si est谩 cerrado
				if (sidebar.classList.contains('sidebar-closed')) {
                    sidebar.classList.add('hidden');
                    openButton.style.display = 'block';
                } else {
                    openButton.style.display = 'none';
                }
			}
		};


		window.addEventListener('resize', handleResize);
		window.addEventListener('load', () => { handleResize(); setActiveLink(); });
		document.addEventListener("astro:after-swap", setActiveLink);
	</script> </body> </html> <script>(function(){const usersJSON = "[]";
const API_BASE_URL = "https://nginx-production-728f.up.railway.app/api";

    document.addEventListener('alpine:init', () => {
        Alpine.data('rolesData', () => ({
            users: JSON.parse(usersJSON),
            apiBaseUrl: API_BASE_URL,
            isPanelOpen: false,
            isEditing: false,
            isDeleting: false,
            isSaving: false,
            isImporting: false,
            isDragging: false,
            selectedFile: null,
            importedData: [],
            userToDeleteId: null,
            userToDeleteName: '',
            newUser: { 
                id: null, name: '', last_name: '', email: '', phone_number: '',
                birthdate: '', gender: 'hombre', curp: '', address: ['', '', ''],
                blood_type: 'O+', registration_date: new Date().toISOString().split('T')[0],
                status: 'activo', role: 'Administrador'
            },
            notification: { show: false, message: '', type: 'success' },

            get filteredUsers() { return this.users; },

            openPanelForAdd() {
                this.isEditing = false;
                this.newUser = { 
                    id: null, name: '', last_name: '', email: '', phone_number: '',
                    birthdate: '', gender: 'hombre', curp: '', address: ['', '', ''],
                    blood_type: 'O+', registration_date: new Date().toISOString().split('T')[0],
                    status: 'activo', role: 'Administrador'
                };
                this.isPanelOpen = true;
            },

            openPanelForEdit(user) {
                this.isEditing = true;
                this.newUser = { ...user };
                this.isPanelOpen = true;
            },

            closePanel() { this.isPanelOpen = false; },

            async saveUser() {
                this.isSaving = true;
                try {
                    const userData = { ...this.newUser };
                    if (this.isEditing) {
                        const response = await fetch(`${this.apiBaseUrl}/users/${this.newUser.id}`, {
                            method: 'PUT',
                            headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
                            body: JSON.stringify(userData)
                        });
                        const result = await response.json();
                        if (response.ok && result.success) {
                            const updatedUser = result.data?.user || result.data || result;
                            const index = this.users.findIndex(u => u.id === this.newUser.id);
                            if (index !== -1) this.users[index] = updatedUser;
                            this.showNotify(result.message || 'Usuario actualizado');
                            this.closePanel();
                        } else {
                            this.showNotify(result.message || 'Error', 'error');
                        }
                    } else {
                        const response = await fetch(`${this.apiBaseUrl}/users`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
                            body: JSON.stringify(userData)
                        });
                        const result = await response.json();
                        if (response.status === 201 && result.success) {
                            const newUser = result.data?.user || result.data || result;
                            this.users.push(newUser);
                            this.showNotify(result.message || 'Usuario creado');
                            this.closePanel();
                        } else {
                            this.showNotify(result.message || 'Error', 'error');
                        }
                    }
                } catch (error) {
                    this.showNotify('Error de conexi贸n', 'error');
                } finally {
                    this.isSaving = false;
                }
            },

            confirmDeleteUser(user) {
                this.userToDeleteId = user.id;
                this.userToDeleteName = `${user.name} ${user.last_name}`;
                this.isDeleting = true;
            },

            async deleteUser(id) {
                try {
                    const response = await fetch(`${this.apiBaseUrl}/users/${id}`, {
                        method: 'DELETE',
                        headers: { 'Accept': 'application/json' }
                    });
                    const result = await response.json();
                    if (response.ok && result.success) {
                        this.users = this.users.filter(u => u.id !== id);
                        this.showNotify(result.message || 'Eliminado');
                    }
                } catch (error) {
                    this.showNotify('Error de conexi贸n', 'error');
                }
                this.isDeleting = false;
            },

            openImportModal() { this.isImporting = true; },
            closeImportModal() { this.isImporting = false; },

            handleFileDrop(event) {
                const file = event.dataTransfer.files[0];
                if (file && (file.name.endsWith('.xlsx') || file.name.endsWith('.xls'))) {
                    this.selectedFile = file;
                    this.readExcelFile(file);
                }
            },

            handleFileSelect(event) {
                const file = event.target.files[0];
                if (file) {
                    this.selectedFile = file;
                    this.readExcelFile(file);
                }
            },

            readExcelFile(file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const data = new Uint8Array(e.target.result);
                        const workbook = XLSX.read(data, { type: 'array' });
                        const rows = XLSX.utils.sheet_to_json(workbook.Sheets[workbook.SheetNames[0]]);
                        this.importedData = rows.map(row => ({
                            name: row.name || '',
                            last_name: row.last_name || '',
                            email: row.email || '',
                            phone_number: row.phone_number || '',
                            birthdate: row.birthdate || '',
                            gender: row.gender || 'hombre',
                            curp: row.curp || '',
                            address: [row.address_line1 || '', row.address_line2 || '', row.address_line3 || ''],
                            blood_type: row.blood_type || 'O+',
                            registration_date: new Date().toISOString().split('T')[0],
                            status: 'activo',
                            role: row.role || 'Maestro'
                        }));
                    } catch (error) { this.showNotify('Error al leer Excel', 'error'); }
                };
                reader.readAsArrayBuffer(file);
            },

            async processImport() {
                this.isSaving = true;
                for (const userData of this.importedData) {
                    try {
                        const response = await fetch(`${this.apiBaseUrl}/users`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
                            body: JSON.stringify(userData)
                        });
                        const result = await response.json();
                        if (response.status === 201 && result.success) {
                            this.users.push(result.data?.user || result.data || result);
                        }
                    } catch (e) {}
                }
                this.isSaving = false;
                this.closeImportModal();
                this.showNotify('Proceso de importaci贸n finalizado');
            },

            downloadTemplate() {
                const template = [{
                    name: 'Juan', last_name: 'P茅rez L贸pez', email: 'juan.perez@example.com',
                    phone_number: '5512345678', birthdate: '2000-05-12', gender: 'hombre',
                    curp: 'PELJ000512HDFRPN09', address_line1: 'Calle 1', address_line2: 'Col',
                    address_line3: 'CDMX', blood_type: 'O+', role: 'Maestro'
                }];
                const ws = XLSX.utils.json_to_sheet(template);
                const wb = XLSX.utils.book_new();
                XLSX.utils.book_append_sheet(wb, ws, 'Usuarios');
                XLSX.writeFile(wb, 'plantilla_usuarios.xlsx');
            },

            showNotify(msg, type = 'success') {
                this.notification = { show: true, message: msg, type };
                setTimeout(() => this.notification.show = false, 3000);
            }
        }));
    });
})();</script>